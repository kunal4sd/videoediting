$(function(){$.ajaxSetup({data:{ajax:!0},global:!0}),$(document).ajaxError(function(e,t,n,i){t=t.responseJSON;t&&t.message&&(t.message.csrf||t.message.authorization)&&global_functions.launch_modal_reload()})});var global_functions={form_to_json:function(e){var e=jQuery(e).serializeArray(),t={};return jQuery.each(e,function(){t[this.name]?(t[this.name].push||(t[this.name]=[t[this.name]]),t[this.name].push(this.value||"")):t[this.name]=this.value||""}),t},build_template:function(e,t,s){return null==s&&(s=!1),(new_element=e.clone()).removeAttr("name"),$.each(t,function(e,t){switch(e){case"keywords_name_en":var n=new_element.find("[data-toggle]");if(void 0!==n&&"tooltip"===n.attr("data-toggle")&&(n.attr("title",t.length?t:"No Keywords"),!s))return!0;if("tooltip"!==new_element.attr("data-toggle")||(new_element.attr("title",t.length?t:"No Keywords"),s))break;return!0;case"status":(i=new_element.find('[name="status_badge"]')).length&&(i.html(global_functions.build_status_badge(t)),new_element.find('[name="status"]').html(t));break;case"poster":n=new_element.find('img[name="poster"]');if(void 0===n||(t?n.attr("src",t):n=new_element.find('span[name="no_poster"]'),n.removeClass("d-none"),s))break;return!0}var i=new_element.find('[name="'+e+'"]');if(i.length&&(i.html(t),!s))return!0;if("string"==typeof e){var o="data-"+e.replace("_","-");if(void 0!==new_element.attr(o)&&(new_element.attr(o,t),!s))return!0}return void 0!==(n=new_element.find("["+o+"]"))&&(n.attr(o,t),!s)||void 0}),new_element},launch_template:function(e,t){return e.appendTo(t),e},set_alerts_expiration:function(e){setTimeout(function(){$.each($(e).children('div[class*="alert"]'),function(e,t){(t=$(t)).fadeOut(400,function(){t.alert("close")})})},3e3)},button_is_loading:function(e){e.attr("data-loading",1),e.attr("data-previous-value",e.html()),e.attr("disabled","disabled"),setTimeout(function(){1==e.attr("data-loading")&&e.html('<img height="24" src="/images/preloader_circle.gif">')},500)},button_is_not_loading:function(e){var t=e.attr("data-previous-value");void 0!==t&&!1!==t&&(e.html(e.attr("data-previous-value")),e.removeAttr("data-previous-value")),e.removeAttr("disabled"),e.attr("data-loading",0)},set_playlist_to_videojs:function(e){event_emitter.trigger("videojs.update.src",[e,"video/MP2T"]),$("#video-video-to-episode").show()},set_poster_to_videojs:function(e){event_emitter.trigger("videojs.update.poster",e)},set_playlist_to_player:function(e,t){event_emitter.trigger("player.update.src",[e,t,"video/MP2T"])},set_poster_to_player:function(e,t){event_emitter.trigger("player.update.poster",[e,t])},reset_player:function(){var e=videojs.getPlayer("video-preview");e.hasStarted(!1),e.poster($("#video-preview").attr("poster")),e.posterImage.show(),e.bigPlayButton.show(),e.currentTime(0),e.reset(),e.src_(!1),$("#video-video-to-episode").hide()},refresh_playlist_holder_height:function(e){var t=$("#video-playlists-holder"),n=$("#video-get-playlist");t.height(418),void 0===e&&(e=t.parent().height()-n.height()),t.height(e)},register_actions:function(s){s.find('button[name="play-btn"]').unbind().on("click",function(e){var t=$(this).closest("tr"),o=t.find('td[name="id"]').html().trim();data_table.rows().every(function(e,t,n){var i=this.data();if(i[table_cols_index.id]===o)return $.each(form_edit_article.find("input"),function(e,t){if("submit"===(t=$(t)).attr("type"))return!0;var n=t.attr("name");"csrf_name"===n?t.attr("value",s.find('input[name="csrf_name"]').val()):"csrf_value"===n?t.attr("value",s.find('input[name="csrf_value"]').val()):(t.val(i[table_cols_index[n]]),t.attr("value",i[table_cols_index[n]]))}),!1}),movie_modal.modal({show:!0}),movie_player.find("source").attr("src",$(this).attr("data-src")),movie_player[0].load(),movie_player[0].pause(),$.each(form_edit_article.find("input"),function(e,t){if("submit"===(t=$(t)).attr("type"))return!0}),event_emitter.trigger("movie.edit.open",t.find('td[name="id"]').html().trim())}),s.find('button[name="download-btn"]').unbind().on("click",function(e){window.location.href=$(this).attr("data-download")}),s.find('button[name="delete-btn"]').unbind().on("click",function(e){var t,n,i,o;is_loading||(n=(t=$(this)).attr("data-action-url"),(o=(i=t.closest("tr")).find('td[name="id"]').html().trim())&&(is_loading=!0,global_functions.button_is_loading(t),$.ajax({method:"post",url:n,data:{id:o,csrf_name:s.find('input[name="csrf_name"]').val(),csrf_value:s.find('input[name="csrf_value"]').val()},complete:function(e){global_functions.button_is_not_loading(t),is_loading=!1,void 0!==e.responseJSON&&e.responseJSON.success&&i.remove()}})))})},build_status_badge:function(e){var t=void 0;switch(e){case"pending":t=$('span[name="global_template_badge_warning"]').clone();break;case"approve":t=$('span[name="global_template_badge_info"]').clone();break;case"live":t=$('span[name="global_template_badge_secondary"]').clone();break;default:t=$('span[name="global_template_badge_success"]').clone()}return t.html(e),t.removeAttr("name"),t},unselect_playlists:function(e){void 0===e&&(e=$("#video-playlists-holder").find(".list-group-item")),$.each(e,function(e,t){(t=$(t)).removeClass("list-group-item-warning"),t.addClass("list-group-item-success")})},clear_episodes:function(){for(var e=videojs.getAllPlayers(),t=0;t<e.length;t++)-1<e[t].id_.search("video-episode")&&e[t].dispose();$("#video-episodes-holder").html(""),$("#video-episodes-to-movie").hide(),global_functions.refresh_playlist_holder_height()},launch_modal_reload:function(){var e=$("#modal-page-reload");e.modal({backdrop:"static",keyboard:!1}),e.find("button").off().on("click",function(){location.reload()})}};$(function(){event_emitter=$(document);var o=$("#global-alerts-holder"),e=$("#global-templates-holder"),s=e.find('div[name="global_template_alert_danger"]'),r=e.find('div[name="global_template_alert_warning"]'),a=e.find('div[name="global_template_alert_info"]'),i=videojs.getPlayer("video-preview");event_emitter.on("show_global_errors",function(e,t,i){void 0===i&&(i=!0),$.each(t,function(e,t){var n=global_functions.launch_template(global_functions.build_template(s,{content:t}),o);i&&setTimeout(function(){n.fadeOut(400,function(){n.alert("close")})},3e3)})}),event_emitter.on("videojs.go_to_sec",function(e,t){var n=parseInt($("#from_second").val()),i=parseInt($("#from_minute").val()),o=parseInt($("#to_second").val()),s=parseInt($("#to_minute").val()),i=60*(i=i||0)+(n=n||0),s=60*(s=s||0)+(o=o||0),r=[];(59<o||o<0)&&r.push("To Sec Must be between 0 - 59"),(59<n||n<0)&&r.push("From Sec Must be between 0 - 59"),s<=i&&r.push("From time must be less than To time"),r.length?event_emitter.trigger("show_global_errors",[r]):t.playBetween(i,s)}),event_emitter.on("videojs.update.src",function(e,t,n){i.src([{type:n,src:t}])}),event_emitter.on("videojs.update.poster",function(e,t){i.poster(t)}),event_emitter.on("player.update.src",function(e,t,n,i){t.src([{type:i,src:n}])}),event_emitter.on("player.update.poster",function(e,t,n){t.poster(n)}),event_emitter.on("form.ajax.result.alert",function(e,t,n){var i;o.html(""),400<=t.status?void 0!==t.responseJSON&&(i={},$.each(t.responseJSON.message,function(e,t){void 0!==n&&n.find('[name="'+e+'"]').addClass("is-invalid"),i=global_functions.launch_template(global_functions.build_template(s,{content:t}),o).attr("data-name",e),void 0!==n&&i.on("closed.bs.alert",function(){n.find('[name="'+$(this).attr("data-name")+'"]').removeClass("is-invalid")})})):302===t.status?void 0!==t.responseJSON.result&&void 0!==t.responseJSON.result.redirect_to&&window.location.replace(t.responseJSON.result.redirect_to):(t.hasOwnProperty("responseJSON")&&t.responseJSON.hasOwnProperty("result")&&void 0!==t.responseJSON.result&&void 0!==t.responseJSON.result.warnings&&(i={},$.each(t.responseJSON.result.warnings,function(e,t){void 0!==n&&n.find('[name="'+e+'"]').addClass("is-invalid"),i=global_functions.launch_template(global_functions.build_template(r,{content:t}),o).attr("data-name",e).addClass("mb-0"),void 0!==n&&i.on("closed.bs.alert",function(){n.find('[name="'+$(this).attr("data-name")+'"]').removeClass("is-invalid")})})),t.hasOwnProperty("responseJSON")&&t.responseJSON.hasOwnProperty("message")&&t.responseJSON.message&&global_functions.launch_template(global_functions.build_template(a,{content:t.responseJSON.message}),o).attr("data-name","info")),global_functions.set_alerts_expiration(o)})}),_vjs7={on:function(e,t,n,i){e.addEventListener(t,n,i)},off:function(e,t,n,i){e.removeEventListener(t,n,i)},addClass:function(e,t){e.classList.add(t)},removeClass:function(e,t){e.classList.remove(t)},findPosition:function(e){return e.getBoundingClientRect()},round:function(e,t){return parseFloat(e.toFixed(t))},formatTime:function(e){var t=Math.floor(e/60).toFixed(0),e=(e%60).toFixed(0);return t+":"+(e=1===e.length?"0"+e:e)},blockTextSelection:function(){}},function(){function n(e,t){this.player=e||this,this.components={},(t=t||{}).hasOwnProperty("locked")||(t.locked=!1),t.hasOwnProperty("hidden")||(t.hidden=!0),t.hasOwnProperty("panel")||(t.panel=!0),t.hasOwnProperty("controlTime")||(t.controlTime=!0),this.options=t,this.init()}videojs.registerPlugin("rangeslider",function(e){var i=this;function t(e){var t,n=i.rangeslider;for(t in n.components)n.components[t].init_();n.options.hidden&&n.hide(),n.options.locked&&n.lock(),!1===n.options.panel&&n.hidePanel(),!1===n.options.controlTime&&n.hidecontrolTime(),n._reset(),i.trigger("loadedRangeSlider")}i.rangeslider=new n(i,e),"Youtube"==i.techName?(i.one("error",function(e){var t,n;alert((t=i.error,void 0===(n={2:"The request contains an invalid parameter value. For example, this error occurs if you specify a video ID that does not have 11 characters, or if the video ID contains invalid characters, such as exclamation points or asterisks.",5:"The requested content cannot be played in an HTML5 player or another error related to the HTML5 player has occurred.",100:"The video requested was not found. This error occurs when a video has been removed (for any reason) or has been marked as private.",101:"The owner of the requested video does not allow it to be played in embedded players.",150:"The owner of the requested video does not allow it to be played in embedded players."})[t]?"Unknown Error":n[t]))}),i.on("firstplay",t)):i.one("playing",t)}),n.prototype={init:function(){var e=this.player||{},e=(this.updatePrecision=3,this.start=0,this.end=0,e.controlBar),t=e.progressControl.seekBar;this.components.RSTimeBar=t.RSTimeBar,this.components.ControlTimePanel=e.ControlTimePanel,this.rstb=this.components.RSTimeBar,this.box=this.components.SeekRSBar=this.rstb.SeekRSBar,this.bar=this.components.SelectionBar=this.box.SelectionBar,this.left=this.components.SelectionBarLeft=this.box.SelectionBarLeft,this.right=this.components.SelectionBarRight=this.box.SelectionBarRight,this.tp=this.components.TimePanel=this.box.TimePanel,this.tpl=this.components.TimePanelLeft=this.tp.TimePanelLeft,this.tpr=this.components.TimePanelRight=this.tp.TimePanelRight,this.ctp=this.components.ControlTimePanel,this.ctpl=this.components.ControlTimePanelLeft=this.ctp.ControlTimePanelLeft,this.ctpr=this.components.ControlTimePanelRight=this.ctp.ControlTimePanelRight,this.ctsb=this.components.ControlTimeSetButton=this.ctp.ControlTimeSetButton},lock:function(){this.options.locked=!0,this.ctp.enable(!1),void 0!==this.box&&_vjs7.addClass(this.box.el_,"locked")},unlock:function(){this.options.locked=!1,this.ctp.enable(),void 0!==this.box&&_vjs7.removeClass(this.box.el_,"locked")},show:function(){this.options.hidden=!1,void 0!==this.rstb&&(this.rstb.show(),this.options.controlTime&&this.showcontrolTime())},hide:function(){this.options.hidden=!0,void 0!==this.rstb&&(this.rstb.hide(),this.ctp.hide())},showPanel:function(){this.options.panel=!0,void 0!==this.tp&&_vjs7.removeClass(this.tp.el_,"disable")},hidePanel:function(){this.options.panel=!1,void 0!==this.tp&&_vjs7.addClass(this.tp.el_,"disable")},showcontrolTime:function(){this.options.controlTime=!0,void 0!==this.ctp&&this.ctp.show()},hidecontrolTime:function(){this.options.controlTime=!1,void 0!==this.ctp&&this.ctp.hide()},setValue:function(e,t,n){n=void 0===n||n;t=this._percent(t);this.locked||0!==e&&1!==e||this.box.setPosition(e,t,n)},setValues:function(e,t,n){n=void 0===n||n,this._reset(),this._setValuesLocked(e,t,n)},getValues:function(){return{start:this.start||this._getArrowValue(0),end:this.end||this._getArrowValue(1)}},playBetween:function(e,t,n){n=void 0===n||n,this.player.currentTime(e),this.player.play(),n?(this.show(),this._reset()):this.hide(),this._setValuesLocked(e,t),this.bar.activatePlay(e,t)},loop:function(e,t,n){var i=this.player;i&&(i.on("pause",videojs.bind(this,function(){this.looping=!1})),(n=void 0===n||n)?(this.show(),this._reset()):this.hide(),this._setValuesLocked(e,t),this.timeStart=e,this.timeEnd=t,this.looping=!0,this.player.currentTime(e),this.player.play(),this.player.on("timeupdate",videojs.bind(this,this.bar.process_loop)))},_getArrowValue:function(e){e=e||0;var t=void 0===(t=this.player.duration())?0:t,t=this[0===e?"left":"right"].el_.style.left.replace("%","");return""===t&&(t=0===e?0:100),_vjs7.round(this._seconds(t/100),this.updatePrecision-1)},_percent:function(e){var t=this.player.duration();return isNaN(t)?0:Math.min(1,Math.max(0,e/t))},_seconds:function(e){var t=this.player.duration();return isNaN(t)?0:Math.min(t,Math.max(0,e*t))},_reset:function(){var e=this.player.duration();this.tpl.el_.style.left="0%",this.tpr.el_.style.left="100%",this._setValuesLocked(0,e)},_setValuesLocked:function(e,t,n){var i=void 0!==n;n=void 0===n||n,this.options.locked?(this.unlock(),this.setValue(0,e,n),this.setValue(1,t,n),this.lock()):(this.setValue(0,e,n),this.setValue(1,t,n)),i&&this._triggerSliderChange()},_checkControlTime:function(e,t,n){var i,o,s,r=t[0],t=t[1],a=r.value,l=t.value;if(e=e||0,a!=n[0])i=r,o=a,s=n[0];else{if(l==n[1])return!1;i=t,o=l,s=n[1]}var n=this.player.duration()||0;(!/^\d+$/.test(o)||60<o)&&(o=""===o?"":s),a=""===a?0:a,l=""===l?0:l,n<(n=60*parseInt(a)+parseInt(l))?(i.value=s,i.style.border="1px solid red"):(i.value=o,i.style.border=r.style.border=t.style.border="1px solid transparent",this.setValue(e,n,!1),this._triggerSliderChange()),1===e?n<60*(a=this.ctpl.el_.children)[0].value+a[1].value&&(i.style.border="1px solid red"):60*(l=this.ctpr.el_.children)[0].value+l[1].value<n&&(i.style.border="1px solid red")},_triggerSliderChange:function(){this.player.trigger("sliderchange")}};var e=videojs.getComponent("Player");e.prototype._v4=_vjs7,e.prototype.lockSlider=function(){return this.rangeslider.lock()},e.prototype.unlockSlider=function(){return this.rangeslider.unlock()},e.prototype.showSlider=function(){return this.rangeslider.show()},e.prototype.hideSlider=function(){return this.rangeslider.hide()},e.prototype.showSliderPanel=function(){return this.rangeslider.showPanel()},e.prototype.hideSliderPanel=function(){return this.rangeslider.hidePanel()},e.prototype.showControlTime=function(){return this.rangeslider.showcontrolTime()},e.prototype.hideControlTime=function(){return this.rangeslider.hidecontrolTime()},e.prototype.setValueSlider=function(e,t){return this.rangeslider.setValues(e,t)},e.prototype.playBetween=function(e,t){return this.rangeslider.playBetween(e,t)},e.prototype.loopBetween=function(e,t){return this.rangeslider.loop(e,t)},e.prototype.getValueSlider=function(){return this.rangeslider.getValues()},videojs.getComponent("SeekBar").prototype.options_.children.push("RSTimeBar");videojs.getComponent("ControlBar").prototype.options_.children.push("ControlTimePanel");var i=videojs.getComponent("Component"),e=videojs.extend(i,{constructor:function(e,t){i.call(this,e,t)}}),e=(e.prototype.init_=function(){this.rs=this.player_.rangeslider},e.prototype.options_={children:{SeekRSBar:{}}},e.prototype.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-timebar-RS",innerHTML:""})},videojs.registerComponent("RSTimeBar",e),videojs.extend(i,{constructor:function(e,t){i.call(this,e,t),this.on("mousedown",this.onMouseDown)}})),e=(e.prototype.init_=function(){this.rs=this.player_.rangeslider},e.prototype.options_={children:{SelectionBar:{},SelectionBarLeft:{},SelectionBarRight:{},TimePanel:{}}},e.prototype.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-rangeslider-holder"})},e.prototype.onMouseDown=function(e){e.preventDefault(),_vjs7.blockTextSelection(),this.rs.options.locked||(_vjs7.on(document,"mousemove",videojs.bind(this,this.onMouseMove)),_vjs7.on(document,"mouseup",videojs.bind(this,this.onMouseUp)))},e.prototype.onMouseUp=function(e){_vjs7.off(document,"mousemove",this.onMouseMove,!1),_vjs7.off(document,"mouseup",this.onMouseUp,!1)},e.prototype.onMouseMove=function(e){var e=this.calculateDistance(e),t=(this.rs.left.pressed?this.setPosition(0,e):this.rs.right.pressed&&this.setPosition(1,e),this.player_.controlBar.currentTimeDisplay);t.contentEl_.innerHTML='<span class="vjs-control-text">'+t.localize("Current Time")+"</span>"+_vjs7.formatTime(this.rs._seconds(e),this.player_.duration()),(this.rs.left.pressed||this.rs.right.pressed)&&this.rs._triggerSliderChange()},e.prototype.setPosition=function(e,t,n){if(n=void 0===n||n,e=e||0,this.rs.options.locked)return!1;if(isNaN(t))return!1;if(0!==e&&1!==e)return!1;var i,o,s=this.rs.left.el_,r=(this.rs.right.el_,this.rs[0===e?"left":"right"].el_),a=this.rs.tpr.el_,l=this.rs.tpl.el_,d=this.rs.bar,c=this.rs[0===e?"ctpl":"ctpr"].el_;return(0===e?d.updateLeft(t):d.updateRight(t))&&(r.style.left=100*t+"%",0===e?d.updateLeft(t):d.updateRight(t),this.rs[0===e?"start":"end"]=this.rs._seconds(t),0===e&&(s.style.zIndex=.9<=t?25:10),r=_vjs7.formatTime(this.rs._seconds(t)),s=(d=l.children[0].innerHTML.length)<=4?this.player_.isFullScreen?3.25:6.5:d<=5?this.player_.isFullScreen?4:8:this.player_.isFullScreen?5:10,d=r.length<=4?this.player_.isFullScreen?97:93:r.length<=5?this.player_.isFullScreen?96:95:this.player_.isFullScreen?95:91,o=this.player_.isFullScreen?.1:.5,0===e?(l.style.left=Math.max(o,Math.min(d,100*t-s/2))+"%",a.style.left.replace("%","")-l.style.left.replace("%","")<=s&&(l.style.left=Math.max(o,Math.min(d,a.style.left.replace("%","")-s))+"%"),l.children[0].innerHTML=r):(a.style.left=Math.max(o,Math.min(d,100*t-s/2))+"%",(a.style.left.replace("%","")||100)-l.style.left.replace("%","")<=s&&(a.style.left=Math.max(o,Math.min(d,+l.style.left.replace("%","")+s))+"%"),a.children[0].innerHTML=r),n&&(t=2==(e=r.split(":")).length?(i=e[0],e[1]):(e[0],i=e[1],e[2]),c.children[0].value=i,c.children[1].value=t)),!0},e.prototype.calculateDistance=function(e){var t=this.getRSTBX(),n=this.getRSTBWidth(),i=this.getWidth();return t+=i/2,n-=i,Math.max(0,Math.min(1,(e.pageX-t)/n))},e.prototype.getRSTBWidth=function(){return this.el_.offsetWidth},e.prototype.getRSTBX=function(){return _vjs7.findPosition(this.el_).left},e.prototype.getWidth=function(){return this.rs.left.el_.offsetWidth},videojs.registerComponent("SeekRSBar",e),videojs.extend(i,{constructor:function(e,t){i.call(this,e,t),this.on("mouseup",this.onMouseUp),this.fired=!1}})),e=(e.prototype.init_=function(){this.rs=this.player_.rangeslider},e.prototype.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-selectionbar-RS"})},e.prototype.onMouseUp=function(){var e=this.rs.left.el_.style.left.replace("%",""),t=this.rs.right.el_.style.left.replace("%",""),n=this.player_.duration(),i=this.rs.updatePrecision,e=_vjs7.round(e*n/100,i),t=_vjs7.round(t*n/100,i);this.player_.currentTime(e),this.player_.play(),this.rs.bar.activatePlay(e,t)},e.prototype.updateLeft=function(e){var t=""!==this.rs.right.el_.style.left?this.rs.right.el_.style.left:100,t=parseFloat(t)/100,n=_vjs7.round(t-e,this.rs.updatePrecision);return e<=1e-5+t&&(this.rs.bar.el_.style.left=100*e+"%",this.rs.bar.el_.style.width=100*n+"%",!0)},e.prototype.updateRight=function(e){var t=""!==this.rs.left.el_.style.left?this.rs.left.el_.style.left:0,t=parseFloat(t)/100,n=_vjs7.round(e-t,this.rs.updatePrecision);return t<=e+1e-5&&(this.rs.bar.el_.style.width=100*n+"%",this.rs.bar.el_.style.left=100*(e-n)+"%",!0)},e.prototype.activatePlay=function(e,t){this.timeStart=e,this.timeEnd=t,this.suspendPlay(),this.player_.on("timeupdate",videojs.bind(this,this._processPlay))},e.prototype.suspendPlay=function(){this.fired=!1,this.player_.off("timeupdate",videojs.bind(this,this._processPlay))},e.prototype._processPlay=function(){this.player_.currentTime()>=this.timeStart&&(this.timeEnd<0||this.player_.currentTime()<this.timeEnd)?this.fired||(this.fired=!0):this.fired&&(this.fired=!1,this.player_.pause(),this.player_.currentTime(this.timeEnd),this.suspendPlay())},e.prototype.process_loop=function(){var e,t=this.player;t&&this.looping&&(((e=t.currentTime())<this.timeStart||0<this.timeEnd&&this.timeEnd<e)&&t.currentTime(this.timeStart))},videojs.registerComponent("SelectionBar",e),videojs.extend(i,{constructor:function(e,t){i.call(this,e,t),this.on("mousedown",this.onMouseDown),this.pressed=!1}})),e=(e.prototype.init_=function(){this.rs=this.player_.rangeslider},e.prototype.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-rangeslider-handle vjs-selectionbar-left-RS",innerHTML:'<div class="vjs-selectionbar-arrow-RS"></div><div class="vjs-selectionbar-line-RS"></div>'})},e.prototype.onMouseDown=function(e){e.preventDefault(),_vjs7.blockTextSelection(),this.rs.options.locked||(this.pressed=!0,_vjs7.on(document,"mouseup",videojs.bind(this,this.onMouseUp)),_vjs7.addClass(this.el_,"active"))},e.prototype.onMouseUp=function(e){_vjs7.off(document,"mouseup",this.onMouseUp,!1),_vjs7.removeClass(this.el_,"active"),this.rs.options.locked||(this.pressed=!1)},videojs.registerComponent("SelectionBarLeft",e),videojs.extend(i,{constructor:function(e,t){i.call(this,e,t),this.on("mousedown",this.onMouseDown),this.pressed=!1}})),e=(e.prototype.init_=function(){this.rs=this.player_.rangeslider},e.prototype.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-rangeslider-handle vjs-selectionbar-right-RS",innerHTML:'<div class="vjs-selectionbar-arrow-RS"></div><div class="vjs-selectionbar-line-RS"></div>'})},e.prototype.onMouseDown=function(e){e.preventDefault(),_vjs7.blockTextSelection(),this.rs.options.locked||(this.pressed=!0,_vjs7.on(document,"mouseup",videojs.bind(this,this.onMouseUp)),_vjs7.addClass(this.el_,"active"))},e.prototype.onMouseUp=function(e){_vjs7.off(document,"mouseup",this.onMouseUp,!1),_vjs7.removeClass(this.el_,"active"),this.rs.options.locked||(this.pressed=!1)},videojs.registerComponent("SelectionBarRight",e),videojs.extend(i,{constructor:function(e,t){i.call(this,e,t)}})),e=(e.prototype.init_=function(){this.rs=this.player_.rangeslider},e.prototype.options_={children:{TimePanelLeft:{},TimePanelRight:{}}},e.prototype.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-timepanel-RS"})},videojs.registerComponent("TimePanel",e),videojs.extend(i,{constructor:function(e,t){i.call(this,e,t)}})),e=(e.prototype.init_=function(){this.rs=this.player_.rangeslider},e.prototype.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-timepanel-left-RS",innerHTML:'<span class="vjs-time-text">00:00</span>'})},videojs.registerComponent("TimePanelLeft",e),videojs.extend(i,{constructor:function(e,t){i.call(this,e,t)}})),e=(e.prototype.init_=function(){this.rs=this.player_.rangeslider},e.prototype.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-timepanel-right-RS",innerHTML:'<span class="vjs-time-text">00:00</span>'})},videojs.registerComponent("TimePanelRight",e),videojs.extend(i,{constructor:function(e,t){i.call(this,e,t)}})),e=(e.prototype.init_=function(){this.rs=this.player_.rangeslider},e.prototype.options_={children:{ControlTimePanelLeft:{},ControlTimePanelRight:{},ControlTimeSetButton:{}}},e.prototype.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-controltimepanel-RS vjs-control"})},e.prototype.enable=function(e){this.rs.ctpl.el_.children[0].disabled=(e=void 0===e||e)?"":"disabled",this.rs.ctpl.el_.children[1].disabled=e?"":"disabled",this.rs.ctpr.el_.children[0].disabled=e?"":"disabled",this.rs.ctpr.el_.children[1].disabled=e?"":"disabled"},videojs.registerComponent("ControlTimePanel",e),videojs.extend(i,{constructor:function(e,t){i.call(this,e,t),this.on("keyup",this.onKeyUp),this.on("keydown",this.onKeyDown)}})),t=(e.prototype.init_=function(){this.rs=this.player_.rangeslider,this.timeOld={}},e.prototype.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-controltimepanel-left-RS",innerHTML:'Start: <input type="number" id="from_minute" maxlength="2" min="0" max="59" value="0"/>:<input type="number" id="from_second" maxlength="2" min="0" max="59" value="0"/>'})},e.prototype.onKeyDown=function(e){this.timeOld[0]=this.el_.children[0].value,this.timeOld[1]=this.el_.children[1].value},e.prototype.onKeyUp=function(e){this.rs._checkControlTime(0,this.el_.children,this.timeOld)},videojs.extend(i,{constructor:function(e,t){i.call(this,e,t),this.on("keyup",this.onKeyUp),this.on("keydown",this.onKeyDown)}})),o=(t.prototype.init_=function(){this.rs=this.player_.rangeslider,this.timeOld={}},t.prototype.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-controltimepanel-right-RS",innerHTML:'End: <input type="number" id="to_minute" maxlength="2" min="0" max="59" value="0"/>:<input type="number" id="to_second" maxlength="2" min="0" max="59" value="0"/>'})},t.prototype.onKeyDown=function(e){this.timeOld[0]=this.el_.children[0].value,this.timeOld[1]=this.el_.children[1].value},t.prototype.onKeyUp=function(e){this.rs._checkControlTime(1,this.el_.children,this.timeOld)},videojs.extend(i,{constructor:function(e,t){i.call(this,e,t),this.on("click",this.set)}}));o.prototype.init_=function(){this.rs=this.player_.rangeslider,this.timeOld={}},o.prototype.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-controltime-set-button",innerHTML:'<button type="button" class="btn btn-success btn-sm">SET</button>'})},o.prototype.set=function(e){event_emitter.trigger("videojs.go_to_sec",this.player())},videojs.registerComponent("ControlTimePanelLeft",e),videojs.registerComponent("ControlTimePanelRight",t),videojs.registerComponent("ControlTimeSetButton",o)}(),$(function(){event_emitter.on("article.delete.article",function(e,t,n,i){$.ajax({method:"post",url:n,data:i,complete:function(e){void 0!==e.responseJSON&&e.responseJSON.success&&(event_emitter.trigger("article.delete.article.done",t),event_emitter.trigger("form.ajax.result.alert",[e]))}})})}),$(function(){$("#article-edit-article").on("submit",function(e){e.preventDefault();var t=$(this),e=t.attr("action"),n=global_functions.form_to_json(t);$.ajax({method:"post",url:e,data:n,complete:function(e){event_emitter.trigger("article.edit.article.done",[e,n]),event_emitter.trigger("form.ajax.result.alert",[e,t])}})})}),$(function(){var e=$("#article-edit-article"),s=e.find('input[name="keywords"]'),r=$("#article-keywords-selector"),t=r.attr("data-action"),n=r.attr("data-initial-action"),i=e.find('input[name="csrf_name"]').val(),o=e.find('input[name="csrf_value"]').val();r.select2({width:"100%",tokenSeparators:[","],multiple:!0,closeOnSelect:!0,minimumInputLength:2,ajax:{placeholder:"Select Keywords",url:t,type:"POST",dataType:"json",data:function(e,t){return{string:e.term,csrf_name:i,csrf_value:o}},processResults:function(e){return{results:e.result}}},templateSelection:function(e){return e.text}}),r.on("change",function(){s.attr("value",r.val().join(","))}),event_emitter.on("movie.edit.open",function(e,t){$.ajax({url:n,type:"POST",data:{article_id:t,csrf_name:i,csrf_value:o},complete:function(e){if(void 0!==e.responseJSON&&e.responseJSON.success){var t,n,e=e.responseJSON,i=[],o=e.result;for(t in new Option("",0,!0,!0),r.html("").trigger("change"),o)i.push(o[t].id),n=new Option(o[t].text,o[t].id,!0,!0),r.append(n).trigger("change");s.attr("value",i.join(","))}}})})}),$(function(){var n=$(document),e=$("#authenticate"),i=e.find('button[type="button"]'),o=!1;e.on("submit",function(e){var t;e.preventDefault(),o||(o=!0,t=$(this),global_functions.button_is_loading(i),$.ajax({method:"post",url:t.attr("action"),data:global_functions.form_to_json(t),complete:function(e){n.trigger("form.ajax.result.alert",[e,t]),400<=e.status&&(global_functions.button_is_not_loading(i),o=!1)}}))}),i.on("click",function(){e.trigger("submit")})}),$(function(){var e=$("input[name='start_date']"),t=$("input[name='end_date']"),n=$("input[name='date']");e.flatpickr({enableTime:!0,enableSeconds:!0,time_24hr:!0,minuteIncrement:1,dateFormat:"Y-m-d H:i:S",defaultDate:e.length&&e.val().length?e.val():moment().format("YYYY-MM-DD 00:00:00"),onClose:function(e,t,n){1===e.length&&((e=e[0]).setHours($(n.calendarContainer).find(".flatpickr-hour").val()),e.setMinutes($(n.calendarContainer).find(".flatpickr-minute").val()),e.setSeconds($(n.calendarContainer).find(".flatpickr-second").val()),n.setDate(e,!0))}}),t.flatpickr({enableTime:!0,enableSeconds:!0,time_24hr:!0,minuteIncrement:1,dateFormat:"Y-m-d H:i:S",defaultDate:t.length&&t.val().length?t.val():moment().format("YYYY-MM-DD 00:00:00"),onClose:function(e,t,n){1===e.length&&((e=e[0]).setHours($(n.calendarContainer).find(".flatpickr-hour").val()),e.setMinutes($(n.calendarContainer).find(".flatpickr-minute").val()),e.setSeconds($(n.calendarContainer).find(".flatpickr-second").val()),n.setDate(e,!0))}}),n.flatpickr({minuteIncrement:1,dateFormat:"Y-m-d",defaultDate:n.length&&n.val().length?n.val():moment().format("YYYY-MM-DD"),onClose:function(e,t,n){1===e.length&&(e=e[0],n.setDate(e,!0))}})}),$(function(){var n=!1,t=$("#listing-get-list");if(0===t.length)return!1;function i(e){for(var t in g)_[g[t].name]=parseInt(t);var n=e.DataTable({dom:"Brfltip",columns:g,columnDefs:[{targets:[_.keywords],visible:!1,searchable:!0},{targets:[_.text],visible:!1,searchable:!1},{targets:[_.status],visible:!1,searchable:!0}],order:[[_.id,"desc"]],select:{style:"multi"},buttons:[{text:"Select All",action:function(){n.rows({page:"current"}).select()}},"selectNone"],language:{buttons:{selectNone:"Deselect All"}}});return n}function o(e){b.off("page.dt"),b.destroy(),d.html(""),$.each(e,function(e,t){var n,o,i;global_functions.launch_template(global_functions.build_template((i=f.clone(),n=i.prop("attributes"),o=$(document.createElement("tr")),i=i.find("ul"),$.each(i,function(e,t){t=$(t);var n=$(document.createElement("td")),i=t.prop("attributes");n.html(t.html()),$.each(i,function(){n.attr(this.name,this.value)}),o.append(n)}),$.each(n,function(){if("name"===this.name)return!0;o.attr(this.name,this.value)}),o),t),d)}),(b=i(v)).on("page.dt",function(){b.rows({selected:!0}).deselect()}),r()}function r(){c.unbind("show.bs.modal").on("show.bs.modal",function(e){var e=$(e.relatedTarget),t=e.closest("tr"),a=t.find('td[name="id"]').html().trim();b.rows().every(function(e,t,n){var i=this.data();if(i[_.id]===a){var o=i,s=!0,r=o[_.status];if(r==="live"&&s)m.attr("disabled","disabled");return $.each(h.find("input"),function(e,t){t=$(t);if(t.attr("type")==="submit")return true;if(r==="live"&&s)t.attr("disabled","disabled");var n=t.attr("name");if(n==="csrf_name")t.attr("value",d.find('input[name="csrf_name"]').val());else if(n==="csrf_value")t.attr("value",d.find('input[name="csrf_value"]').val());else{t.val(o[_[n]]);t.attr("value",o[_[n]])}}),!1}}),c.modal({show:!0}),p.find("source").attr("src",e.attr("data-src")),p[0].load(),p[0].pause(),event_emitter.trigger("movie.edit.open",t.find('td[name="id"]').html().trim())}),d.unbind("click").on("click",'button[name="download-btn"]',function(e){window.location.href=$(this).attr("data-download")}),u.unbind("show.bs.modal").on("show.bs.modal",function(e){var o=$(e.relatedTarget);u.unbind("click").on("click",'button[name="delete-btn"]',function(e){var t=o.attr("data-action-url"),n=o.closest("tr").find('td[name="id"]').html().trim(),i={id:n,csrf_name:d.find('input[name="csrf_name"]').val(),csrf_value:d.find('input[name="csrf_value"]').val()};n&&event_emitter.trigger("article.delete.article",[o,t,i])})})}var s=t.find('button[type="button"]'),e=$("#listing-status-approve"),a=$("#listing-status-pending"),l=$("#listing-status-live"),d=$("#listing-list-holder"),c=$("#listing-modal-edit-article"),u=$("#listing-modal-delete-article"),p=$("#listing-modal-movie-play"),h=$("#article-edit-article"),m=h.find("#listing-modal-edit-article-button-submit"),f=$("#global-templates-holder").find('li[name="global_template_list_video"]'),v=$("#listing-video-table"),_={},g=[{name:"status"},{name:"keywords"},{name:"status_badge"},{name:"headline"},{name:"id"},{name:"issue_datetime"},{name:"created"},{name:"publication"},{name:"duration"},{name:"file_size"},{name:"actions"},{name:"text"}],b=i(v);m.on("click",function(e){e.preventDefault(),global_functions.button_is_loading(m),h.submit()}),event_emitter.on("article.delete.article.done",function(e,t){var i=(t=$(t)).closest("tr").find('td[name="id"]').html().trim();b.rows().every(function(e,t,n){if(this.data()[_.id]===i)return b.row(this).remove().draw(!0),!1}),u.modal("hide")}),event_emitter.on("article.edit.article.done",function(e,t,o){var s;global_functions.button_is_not_loading(m),c.length&&void 0!==t.responseJSON&&t.responseJSON.success&&(s=o.id,b.rows().every(function(e,t,n){var i=this.data();if(i[_.id]===s)return $.each(h.find("input"),function(e,t){if("submit"===(t=$(t)).attr("type"))return!0;var t=t.attr("name"),n=o[t];i[_[t]]=n,"status"===t&&(i[_.status_badge]=global_functions.build_status_badge(n).prop("outerHTML"))}),this.data(i),!1}),c.modal("hide"),r())}),event_emitter.on("article.edit.article_status.done",function(e,t,i,n){var o;global_functions.button_is_not_loading(n),void 0!==t.responseJSON&&t.responseJSON.success&&(n=b.rows(),o=!1,n.every(function(e,t,n){return-1===i.rowIdxs.indexOf(e)||((o=this.data())[_.status]=i.status,o[_.status_badge]=global_functions.build_status_badge(i.status).prop("outerHTML"),this.data(o)),!1}))}),c.on("hidden.bs.modal",function(e){p[0].pause(),$.each(h.find("input"),function(e,t){if("submit"===(t=$(t)).attr("type"))return!0;t.val(""),t.attr("value",""),t.removeAttr("disabled")}),m.removeAttr("disabled")}),s.on("click",function(e){e.preventDefault(),t.trigger("submit")}),t.on("submit",function(e){var t;e.preventDefault(),n||(n=!0,t=$(this),e=global_functions.form_to_json(t),global_functions.button_is_loading(s),$.ajax({method:"post",url:t.attr("action"),data:e,complete:function(e){event_emitter.trigger("form.ajax.result.alert",[e,t]),global_functions.button_is_not_loading(s),n=!1,void 0!==e.responseJSON&&void 0!==e.responseJSON.result&&void 0!==e.responseJSON.result.videos&&o(e.responseJSON.result.videos)}}))}),e.add(a).add(l).on("click",function(e){e.preventDefault();var t,n,i,o,e=b.rows(".selected");e.count()&&(i=(n=(t=$(this)).data()).url,o={ids:[],rowIdxs:[],status:n.value,csrf_name:d.find('input[name="csrf_name"]').val(),csrf_value:d.find('input[name="csrf_value"]').val()},e.every(function(e,t,n){var i=this.data();return o.ids.push(i[_.id]),o.rowIdxs.push(e),i[_.status_badge]=$(i[_.status_badge]).html('<img height="24" src="/images/preloader_circle.gif">').prop("outerHTML"),this.data(i),!1}),$.ajax({method:"post",url:i,data:o,complete:function(e){event_emitter.trigger("article.edit.article_status.done",[e,o,t]),event_emitter.trigger("form.ajax.result.alert",[e])}}))})}),$(function(){var e=$("#listing-publication-select");if(0===e.length)return!1;var t=$("#listing-publication-input");e.select2(),e.on("change",function(){t.attr("value",e.val().join(","))})}),$(function(){var e=$("#listing-status-select");if(0===e.length)return!1;var t=$("#listing-status-input");e.select2(),e.on("change",function(){t.attr("value",e.val().join(","))})}),$(function(){var i=$("#publications-report-table"),e=i.DataTable({select:!1}),o=$("#publication-modal-restart-process");o.on("show.bs.modal",function(e){var t=$(e.relatedTarget),n=t.data();o.unbind("click").on("click",'button[name="restart-btn"]',function(e){o.modal("hide"),global_functions.button_is_loading(t),$.ajax({method:"post",url:n.actionUrl,data:{id:n.id,process:n.process,server:n.server,csrf_name:i.find('input[name="csrf_name"]').val(),csrf_value:i.find('input[name="csrf_value"]').val()},complete:function(e){event_emitter.trigger("form.ajax.result.alert",[e]),global_functions.button_is_not_loading(t)}})})}),e.order([4,"asc"],[5,"asc"]).draw()}),$(function(){var s=$("#video-episodes-holder");if(0===s.length)return!1;var r=0,a=0,l=videojs.getPlayer("video-preview"),t=$("#video-get-episode"),d=t.find('button[type="button"]'),c=!1;d.on("click",function(e){e.preventDefault(),t.submit()}),t.on("submit",function(e){var t,n,i,o;e.preventDefault(),c||(c=!0,e=Math.floor(l.rangeslider.start),t=Math.ceil(l.rangeslider.end),void 0!==(n=l.currentSource())&&void 0!==n.src&&(o=t,0<=(i=e)&&0<o&&i<o)?(o=(i=$(this)).attr("action"),global_functions.button_is_loading(d),$.ajax({method:"post",url:o,data:{from:e,to:t,playlist:n.src,csrf_name:i.find('input[name="csrf_name"]').val(),csrf_value:i.find('input[name="csrf_value"]').val()},complete:function(e){var t,n,i;event_emitter.trigger("form.ajax.result.alert",[e]),global_functions.button_is_not_loading(d),c=!1,void 0!==e.responseJSON.result&&void 0!==e.responseJSON.result.src&&(t=e.responseJSON.result.src,e=e.responseJSON.result.poster,n="video-episode-"+a,s.append('<div class="col-md-'+Math.floor(4)+'"><div class="row mx-auto"><video id="'+n+'" class="col-sm-12 video-js vjs-big-play-centered vjs-default-skin mr-2 mt-2" controls poster="/images/no_video.png" preload="auto" data-setup=\'{"inactivityTimeout":0,"width":426,"height":225,"playbackRates":[0.5,1,1.25,1.5,2]}\'></video></div><div class="row mx-auto"><button id="remove-'+n+'" class="col-sm-12 btn btn-danger btn-md oi oi-trash" style="top: 0px;"></button></div></div>'),$("#remove-"+n).unbind().on("click",function(e){$("#"+n).parent().parent().remove(),0===--r&&$("#video-episodes-to-movie").hide(),i.dispose(),global_functions.refresh_playlist_holder_height()}),i=videojs(n,{width:426,height:225,controls:!0,plugins:{}}),global_functions.set_playlist_to_player(i,t),global_functions.set_poster_to_player(i,e),i.currentTime(.1),i.rangeslider({hidden:!0,responsive:!0,width:426,height:225}),a++,++r&&$("#video-episodes-to-movie").show(),global_functions.refresh_playlist_holder_height())}})):(event_emitter.trigger("show_global_errors",[["Please load a playlist first and then set the time range correctly."]]),c=!1))})}),$(function(){var a=!1,t=$("#video-get-movie");if(0===t.length)return!1;function l(e){global_functions.build_template(o,e).prependTo(s),n()}function n(){s.find('button[name="play-btn"]').unbind().on("click",function(e){var o=$(this).closest("li"),s=o.find('[name="status"]').html();u.find("source").attr("src",$(this).attr("data-src")),u[0].load(),u[0].pause(),"live"===s&&h.attr("disabled","disabled"),$.each(p.find("input"),function(e,t){var n=(t=$(t)).attr("type");if("live"===s&&t.attr("disabled","disabled"),"submit"===n)return!0;var n=t.attr("name"),n=o.find('[name="'+n+'"]'),i=n.html();void 0!==(i=void 0!==i&&0!==i.length?i:n.val())&&(i=i.trim(),t.val(i),t.attr("value",i))}),r.modal({show:!0}),event_emitter.trigger("movie.edit.open",o.find('div[name="id"]').html().trim())}),s.find('button[name="download-btn"]').unbind().on("click",function(e){window.location.href=$(this).attr("data-download")}),i.unbind().on("show.bs.modal",function(e){var o=$(e.relatedTarget);i.unbind("click").on("click",'button[name="delete-btn"]',function(e){var t=o.attr("data-action-url"),n=o.closest("li").find('div[name="id"]').html().trim(),i={id:n,csrf_name:s.find('input[name="csrf_name"]').val(),csrf_value:s.find('input[name="csrf_value"]').val()};n&&event_emitter.trigger("article.delete.article",[o,t,i])})})}var d=$("#video-new-movie"),i=$("#video-modal-delete-article"),c=t.find("#video-get-movie-submit-button"),s=$("#video-movies-holder"),o=$("#global-templates-holder").find('li[name="global_template_list_movie"]'),r=$("#video-modal-edit-article"),u=$("#video-modal-movie-play"),p=$("#article-edit-article"),h=p.find("#video-modal-edit-article-button-submit");event_emitter.on("movie.get.list",function(e,t){$.ajax({method:"post",url:s.attr("data-movie-list-url"),data:t,complete:function(e){if(void 0!==e.responseJSON&&e.responseJSON.success&&void 0!==e.responseJSON.result&&Array.isArray(e.responseJSON.result.movies))for(var t in s.html(""),e.responseJSON.result.movies)l(e.responseJSON.result.movies[t])}})}),c.on("click",function(e){e.preventDefault(),t.submit()}),h.on("click",function(e){e.preventDefault(),global_functions.button_is_loading(h),p.submit()}),event_emitter.on("article.delete.article.done",function(e,t){$(t).closest("li").remove(),i.modal("hide")}),event_emitter.on("article.edit.article.done",function(e,t){var n,o;global_functions.button_is_not_loading(h),r.length&&void 0!==t.responseJSON&&t.responseJSON.success&&(n=p.find('input[name="id"]').val(),t=s.find('div[name="id"]'),o=!1,$.each(t,function(e,t){if((t=$(t)).html().trim()===n)return o=t.closest("li"),!1}),o&&$.each(p.find("input"),function(e,t){if("submit"===(t=$(t)).attr("type"))return!0;var n=t.attr("name"),t=t.val(),i=o.find('[name="'+n+'"]');void 0!==i.attr("value")?i.val(t):i.html(t),"status"===n&&o.find('[name="status_badge"]').html(global_functions.build_status_badge(t).prop("outerHTML"))}),r.modal("hide"))}),r.on("hidden.bs.modal",function(e){u[0].pause(),$.each(p.find("input"),function(e,t){if("submit"===(t=$(t)).attr("type"))return!0;t.val(""),t.attr("value",""),t.removeAttr("disabled")}),h.removeAttr("disabled")}),t.on("submit",function(e){if(e.preventDefault(),!a){a=!0;for(var t,n,i=videojs.getAllPlayers(),o=[],s=0;s<i.length;s++){var r=i[s];-1<r.id_.search("video-episode")&&o.push(r.currentSource().src)}o.length&&(e=(t=$(this)).attr("action"),(n=global_functions.form_to_json(t)).episodes=o,global_functions.button_is_loading(c),$.ajax({method:"post",url:e,data:n,complete:function(e){event_emitter.trigger("form.ajax.result.alert",[e,t]),global_functions.button_is_not_loading(c),a=!1,void 0!==e.responseJSON&&e.responseJSON.success&&(l(e.responseJSON.result),d.modal("hide"),global_functions.clear_episodes(),t.find('input[name="title"]').val(""))}}))}}),n()}),$(function(){var t=$("#video-get-playlist");if(0===t.length)return!1;function n(){var n=o.find(".list-group-item");n.unbind().on("click",function(){var e=$(this),t=e.data();global_functions.reset_player(),global_functions.unselect_playlists(n),e.addClass("list-group-item-warning"),e.removeClass("list-group-item-success"),global_functions.set_playlist_to_videojs(t.url),global_functions.set_poster_to_videojs(t.poster),c(t.publication,t.hash,t.urlTexts)})}var i=$("#segment_text"),o=$("#video-playlists-holder"),s=$("#global-templates-holder").find('div[name="global_template_alert_playlist"]'),r=t.find('button[type="button"]'),a=t.find('input[name="csrf_name"]').val(),l=t.find('input[name="csrf_value"]').val(),d=!1,c=function(e,t,n){i.val(""),$.ajax({method:"post",url:n,data:{publication:e,hash:t,csrf_name:a,csrf_value:l,ajax:!0},complete:function(e){void 0!==e.responseJSON&&void 0!==e.responseJSON.result&&void 0!==e.responseJSON.result.texts&&i.val(e.responseJSON.result.texts.join(" "))}})};r.on("click",function(e){e.preventDefault(),t.trigger("submit")}),t.on("submit",function(e){var t;e.preventDefault(),$("#video-movies-holder").html(""),global_functions.clear_episodes(),o.html(""),global_functions.reset_player(),d||(d=!0,t=$(this),e=global_functions.form_to_json(t),global_functions.button_is_loading(r),event_emitter.trigger("movie.get.list",e),$.ajax({method:"post",url:t.attr("action"),data:e,complete:function(e){event_emitter.trigger("form.ajax.result.alert",[e,t]),global_functions.button_is_not_loading(r),d=!1,void 0!==e.responseJSON&&void 0!==e.responseJSON.result&&void 0!==e.responseJSON.result.playlists&&(e=e.responseJSON.result.playlists,$.each(e,function(e,t){global_functions.launch_template(global_functions.build_template(s,t),o)}),n(),global_functions.refresh_playlist_holder_height())}}))}),n()}),$(function(){var o=$("#video-search-text");if(0===o.length)return!1;function n(){var e=i.find(".go-to"),t=i.find(".show-preview"),n=i.find(".hide-preview");$.each(e,function(e,t){var n=$(this),i=n.parent().parent().parent(".list-group-item").data(),o=n.attr("href");o=(o=(o=o.replace("start_segment",encodeURIComponent(i.startSegment))).replace("end_segment",encodeURIComponent(i.endSegment))).replace("publication",encodeURIComponent(i.pubId)),n.attr("href",o)}),t.unbind().on("click",function(){var t=$(this),n=t.parent().parent().parent(".list-group-item"),i=n.data();global_functions.button_is_loading(t),n.find(".text-preview").text(""),$.ajax({method:"post",url:i.getTextUrl,data:{publication:i.pubId,start_date:i.startDate,end_date:i.endDate,csrf_name:s,csrf_value:r},complete:function(e){event_emitter.trigger("form.ajax.result.alert",[e,o]),global_functions.button_is_not_loading(t),d=!1,void 0!==e.responseJSON&&void 0!==e.responseJSON.result&&void 0!==e.responseJSON.result.texts&&(n.find(".text-preview").html(e.responseJSON.result.texts.join(" ")),n.find(".text-preview").highlight(i.text.split(" ")),t.hide(),t.parent().find(".hide-preview").show())}})}),n.unbind().on("click",function(){var e=$(this);e.parent().parent().parent(".list-group-item").find(".text-preview").text(""),e.hide(),e.parent().find(".show-preview").show()})}var s=o.find('input[name="csrf_name"]').val(),r=o.find('input[name="csrf_value"]').val(),i=$("#results"),a=$("#global-templates-holder").find('div[name="global_template_alert_search_text"]'),l=o.find('button[type="button"]'),d=!1;l.on("click",function(e){e.preventDefault(),o.trigger("submit")}),o.on("submit",function(e){var t;e.preventDefault(),i.html(""),d||(d=!0,t=$(this),e=global_functions.form_to_json(t),global_functions.button_is_loading(l),$.ajax({method:"post",url:t.attr("action"),data:e,complete:function(e){event_emitter.trigger("form.ajax.result.alert",[e,t]),global_functions.button_is_not_loading(l),d=!1,void 0!==e.responseJSON&&void 0!==e.responseJSON.result&&void 0!==e.responseJSON.result.texts&&(e=e.responseJSON.result.texts,$.each(e,function(e,t){global_functions.launch_template(global_functions.build_template(a,t,!0),i)}),n())}}))}),n()}),$(function(){var e=videojs.getPlayer("video-preview"),t=$("#video-clear-player"),n=25,i=setInterval(function(){void 0!==e?(e.ready(function(){e.rangeslider({hidden:!1,responsive:!0,width:800,height:400,controlTime:!0,controlBar:{volumePanel:{inline:!1,vertical:!0}}})}),clearInterval(i)):0===n&&clearInterval(i),n--},200);t.on("click",function(e){e.preventDefault(),global_functions.reset_player(),global_functions.unselect_playlists()})});