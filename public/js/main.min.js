$(function(){$.ajaxSetup({data:{ajax:!0},global:!0}),$(document).ajaxError(function(t,e,n,i){e=e.responseJSON;e&&e.message&&(e.message.csrf||e.message.authorization)&&global_functions.launch_modal_reload()})});var global_functions={form_to_json:function(t){var t=jQuery(t).serializeArray(),e={};return jQuery.each(t,function(){e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""}),e},build_template:function(t,e,a){return null==a&&(a=!1),(new_element=t.clone()).removeAttr("name"),$.each(e,function(t,e){switch(t){case"keywords_name_en":var n=new_element.find("[data-toggle]");if(void 0!==n&&"tooltip"===n.attr("data-toggle")&&(n.attr("title",e.length?e:"No Keywords"),!a))return!0;if("tooltip"!==new_element.attr("data-toggle")||(new_element.attr("title",e.length?e:"No Keywords"),a))break;return!0;case"status":(i=new_element.find('[name="status_badge"]')).length&&(i.html(global_functions.build_status_badge(e)),new_element.find('[name="status"]').html(e));break;case"poster":n=new_element.find('img[name="poster"]');if(void 0===n||(e?n.attr("src",e):n=new_element.find('span[name="no_poster"]'),n.removeClass("d-none"),a))break;return!0}var i=new_element.find('[name="'+t+'"]');if(i.length&&(i.html(e),!a))return!0;if("string"==typeof t){var o="data-"+t.replace("_","-");if(void 0!==new_element.attr(o)&&(new_element.attr(o,e),!a))return!0}return void 0!==(n=new_element.find("["+o+"]"))&&(n.attr(o,e),!a)||void 0}),new_element},launch_template:function(t,e){return t.appendTo(e),t},set_alerts_expiration:function(t){setTimeout(function(){$.each($(t).children('div[class*="alert"]'),function(t,e){(e=$(e)).fadeOut(400,function(){e.alert("close")})})},3e3)},button_is_loading:function(t){t.attr("data-loading",1),t.attr("data-previous-value",t.html()),t.attr("disabled","disabled"),setTimeout(function(){1==t.attr("data-loading")&&t.html('<img height="24" src="/images/preloader_circle.gif">')},500)},button_is_not_loading:function(t){var e=t.attr("data-previous-value");void 0!==e&&!1!==e&&(t.html(t.attr("data-previous-value")),t.removeAttr("data-previous-value")),t.removeAttr("disabled"),t.attr("data-loading",0)},set_playlist_to_videojs:function(t){event_emitter.trigger("videojs.update.src",[t,"video/MP2T"]),$("#video-video-to-episode").show()},set_poster_to_videojs:function(t){event_emitter.trigger("videojs.update.poster",t)},set_playlist_to_player:function(t,e){event_emitter.trigger("player.update.src",[t,e,"video/MP2T"])},set_poster_to_player:function(t,e){event_emitter.trigger("player.update.poster",[t,e])},reset_player:function(){var t=videojs.getPlayer("video-preview");t.hasStarted(!1),t.poster($("#video-preview").attr("poster")),t.posterImage.show(),t.bigPlayButton.show(),t.currentTime(0),t.reset(),t.src_(!1),$("#video-video-to-episode").hide()},refresh_playlist_holder_height:function(t){var e=$("#video-playlists-holder"),n=$("#video-get-playlist");e.height(418),void 0===t&&(t=e.parent().height()-n.height()),e.height(t)},register_actions:function(a){a.find('button[name="play-btn"]').unbind().on("click",function(t){var e=$(this).closest("tr"),o=e.find('td[name="id"]').html().trim();data_table.rows().every(function(t,e,n){var i=this.data();if(i[table_cols_index.id]===o)return $.each(form_edit_article.find("input"),function(t,e){if("submit"===(e=$(e)).attr("type"))return!0;var n=e.attr("name");"csrf_name"===n?e.attr("value",a.find('input[name="csrf_name"]').val()):"csrf_value"===n?e.attr("value",a.find('input[name="csrf_value"]').val()):(e.val(i[table_cols_index[n]]),e.attr("value",i[table_cols_index[n]]))}),!1}),movie_modal.modal({show:!0}),movie_player.find("source").attr("src",$(this).attr("data-src")),movie_player[0].load(),movie_player[0].pause(),$.each(form_edit_article.find("input"),function(t,e){if("submit"===(e=$(e)).attr("type"))return!0}),event_emitter.trigger("movie.edit.open",e.find('td[name="id"]').html().trim())}),a.find('button[name="download-btn"]').unbind().on("click",function(t){window.location.href=$(this).attr("data-download")}),a.find('button[name="delete-btn"]').unbind().on("click",function(t){var e,n,i,o;is_loading||(n=(e=$(this)).attr("data-action-url"),(o=(i=e.closest("tr")).find('td[name="id"]').html().trim())&&(is_loading=!0,global_functions.button_is_loading(e),$.ajax({method:"post",url:n,data:{id:o,csrf_name:a.find('input[name="csrf_name"]').val(),csrf_value:a.find('input[name="csrf_value"]').val()},complete:function(t){global_functions.button_is_not_loading(e),is_loading=!1,void 0!==t.responseJSON&&t.responseJSON.success&&i.remove()}})))})},build_status_badge:function(t){var e=void 0;switch(t){case"pending":e=$('span[name="global_template_badge_warning"]').clone();break;case"approve":e=$('span[name="global_template_badge_info"]').clone();break;case"live":e=$('span[name="global_template_badge_secondary"]').clone();break;default:e=$('span[name="global_template_badge_success"]').clone()}return e.html(t),e.removeAttr("name"),e},unselect_playlists:function(t){void 0===t&&(t=$("#video-playlists-holder").find(".list-group-item")),$.each(t,function(t,e){(e=$(e)).removeClass("list-group-item-warning"),e.addClass("list-group-item-success")})},clear_episodes:function(){for(var t=videojs.getAllPlayers(),e=0;e<t.length;e++)-1<t[e].id_.search("video-episode")&&t[e].dispose();$("#video-episodes-holder").html(""),$("#video-episodes-to-movie").hide(),global_functions.refresh_playlist_holder_height()},launch_modal_reload:function(){var t=$("#modal-page-reload");t.modal({backdrop:"static",keyboard:!1}),t.find("button").off().on("click",function(){location.reload()})}};$(function(){event_emitter=$(document);var o=$("#global-alerts-holder"),t=$("#global-templates-holder"),a=t.find('div[name="global_template_alert_danger"]'),s=t.find('div[name="global_template_alert_warning"]'),r=t.find('div[name="global_template_alert_info"]'),i=videojs.getPlayer("video-preview");event_emitter.on("show_global_errors",function(t,e,i){void 0===i&&(i=!0),$.each(e,function(t,e){var n=global_functions.launch_template(global_functions.build_template(a,{content:e}),o);i&&setTimeout(function(){n.fadeOut(400,function(){n.alert("close")})},3e3)})}),event_emitter.on("videojs.go_to_sec",function(t,e){var n=parseInt($("#from_second").val()),i=parseInt($("#from_minute").val()),o=parseInt($("#to_second").val()),a=parseInt($("#to_minute").val()),i=60*(i=i||0)+(n=n||0),a=60*(a=a||0)+(o=o||0),s=[];(59<o||o<0)&&s.push("To Sec Must be between 0 - 59"),(59<n||n<0)&&s.push("From Sec Must be between 0 - 59"),a<=i&&s.push("From time must be less than To time"),s.length?event_emitter.trigger("show_global_errors",[s]):e.playBetween(i,a)}),event_emitter.on("videojs.update.src",function(t,e,n){i.src([{type:n,src:e}])}),event_emitter.on("videojs.update.poster",function(t,e){i.poster(e)}),event_emitter.on("player.update.src",function(t,e,n,i){e.src([{type:i,src:n}])}),event_emitter.on("player.update.poster",function(t,e,n){e.poster(n)}),event_emitter.on("form.ajax.result.alert",function(t,e,n){var i;o.html(""),400<=e.status?void 0!==e.responseJSON&&(i={},$.each(e.responseJSON.message,function(t,e){void 0!==n&&n.find('[name="'+t+'"]').addClass("is-invalid"),i=global_functions.launch_template(global_functions.build_template(a,{content:e}),o).attr("data-name",t),void 0!==n&&i.on("closed.bs.alert",function(){n.find('[name="'+$(this).attr("data-name")+'"]').removeClass("is-invalid")})})):302===e.status?void 0!==e.responseJSON.result&&void 0!==e.responseJSON.result.redirect_to&&window.location.replace(e.responseJSON.result.redirect_to):(e.hasOwnProperty("responseJSON")&&e.responseJSON.hasOwnProperty("result")&&void 0!==e.responseJSON.result&&void 0!==e.responseJSON.result.warnings&&(i={},$.each(e.responseJSON.result.warnings,function(t,e){void 0!==n&&n.find('[name="'+t+'"]').addClass("is-invalid"),i=global_functions.launch_template(global_functions.build_template(s,{content:e}),o).attr("data-name",t).addClass("mb-0"),void 0!==n&&i.on("closed.bs.alert",function(){n.find('[name="'+$(this).attr("data-name")+'"]').removeClass("is-invalid")})})),e.hasOwnProperty("responseJSON")&&e.responseJSON.hasOwnProperty("message")&&e.responseJSON.message&&global_functions.launch_template(global_functions.build_template(r,{content:e.responseJSON.message}),o).attr("data-name","info")),global_functions.set_alerts_expiration(o)})}),_vjs7={on:function(t,e,n,i){t.addEventListener(e,n,i)},off:function(t,e,n,i){t.removeEventListener(e,n,i)},addClass:function(t,e){t.classList.add(e)},removeClass:function(t,e){t.classList.remove(e)},findPosition:function(t){return t.getBoundingClientRect()},round:function(t,e){return parseFloat(t.toFixed(e))},formatTime:function(t){var e=Math.floor(t/60).toFixed(0),t=(t%60).toFixed(0);return e+":"+(t=1===t.length?"0"+t:t)},blockTextSelection:function(){}},function(){function n(t,e){this.player=t||this,this.components={},(e=e||{}).hasOwnProperty("locked")||(e.locked=!1),e.hasOwnProperty("hidden")||(e.hidden=!0),e.hasOwnProperty("panel")||(e.panel=!0),e.hasOwnProperty("controlTime")||(e.controlTime=!0),this.options=e,this.init()}videojs.registerPlugin("rangeslider",function(t){var i=this;function e(t){var e,n=i.rangeslider;for(e in n.components)n.components[e].init_();n.options.hidden&&n.hide(),n.options.locked&&n.lock(),!1===n.options.panel&&n.hidePanel(),!1===n.options.controlTime&&n.hidecontrolTime(),n._reset(),i.trigger("loadedRangeSlider")}i.rangeslider=new n(i,t),"Youtube"==i.techName?(i.one("error",function(t){var e,n;alert((e=i.error,void 0===(n={2:"The request contains an invalid parameter value. For example, this error occurs if you specify a video ID that does not have 11 characters, or if the video ID contains invalid characters, such as exclamation points or asterisks.",5:"The requested content cannot be played in an HTML5 player or another error related to the HTML5 player has occurred.",100:"The video requested was not found. This error occurs when a video has been removed (for any reason) or has been marked as private.",101:"The owner of the requested video does not allow it to be played in embedded players.",150:"The owner of the requested video does not allow it to be played in embedded players."})[e]?"Unknown Error":n[e]))}),i.on("firstplay",e)):i.one("playing",e)}),n.prototype={init:function(){var t=this.player||{},t=(this.updatePrecision=3,this.start=0,this.end=0,t.controlBar),e=t.progressControl.seekBar;this.components.RSTimeBar=e.RSTimeBar,this.components.ControlTimePanel=t.ControlTimePanel,this.rstb=this.components.RSTimeBar,this.box=this.components.SeekRSBar=this.rstb.SeekRSBar,this.bar=this.components.SelectionBar=this.box.SelectionBar,this.left=this.components.SelectionBarLeft=this.box.SelectionBarLeft,this.right=this.components.SelectionBarRight=this.box.SelectionBarRight,this.tp=this.components.TimePanel=this.box.TimePanel,this.tpl=this.components.TimePanelLeft=this.tp.TimePanelLeft,this.tpr=this.components.TimePanelRight=this.tp.TimePanelRight,this.ctp=this.components.ControlTimePanel,this.ctpl=this.components.ControlTimePanelLeft=this.ctp.ControlTimePanelLeft,this.ctpr=this.components.ControlTimePanelRight=this.ctp.ControlTimePanelRight,this.ctsb=this.components.ControlTimeSetButton=this.ctp.ControlTimeSetButton},lock:function(){this.options.locked=!0,this.ctp.enable(!1),void 0!==this.box&&_vjs7.addClass(this.box.el_,"locked")},unlock:function(){this.options.locked=!1,this.ctp.enable(),void 0!==this.box&&_vjs7.removeClass(this.box.el_,"locked")},show:function(){this.options.hidden=!1,void 0!==this.rstb&&(this.rstb.show(),this.options.controlTime&&this.showcontrolTime())},hide:function(){this.options.hidden=!0,void 0!==this.rstb&&(this.rstb.hide(),this.ctp.hide())},showPanel:function(){this.options.panel=!0,void 0!==this.tp&&_vjs7.removeClass(this.tp.el_,"disable")},hidePanel:function(){this.options.panel=!1,void 0!==this.tp&&_vjs7.addClass(this.tp.el_,"disable")},showcontrolTime:function(){this.options.controlTime=!0,void 0!==this.ctp&&this.ctp.show()},hidecontrolTime:function(){this.options.controlTime=!1,void 0!==this.ctp&&this.ctp.hide()},setValue:function(t,e,n){n=void 0===n||n;e=this._percent(e);this.locked||0!==t&&1!==t||this.box.setPosition(t,e,n)},setValues:function(t,e,n){n=void 0===n||n,this._reset(),this._setValuesLocked(t,e,n)},getValues:function(){return{start:this.start||this._getArrowValue(0),end:this.end||this._getArrowValue(1)}},playBetween:function(t,e,n){n=void 0===n||n,this.player.currentTime(t),this.player.play(),n?(this.show(),this._reset()):this.hide(),this._setValuesLocked(t,e),this.bar.activatePlay(t,e)},loop:function(t,e,n){var i=this.player;i&&(i.on("pause",videojs.bind(this,function(){this.looping=!1})),(n=void 0===n||n)?(this.show(),this._reset()):this.hide(),this._setValuesLocked(t,e),this.timeStart=t,this.timeEnd=e,this.looping=!0,this.player.currentTime(t),this.player.play(),this.player.on("timeupdate",videojs.bind(this,this.bar.process_loop)))},_getArrowValue:function(t){t=t||0;var e=void 0===(e=this.player.duration())?0:e,e=this[0===t?"left":"right"].el_.style.left.replace("%","");return""===e&&(e=0===t?0:100),_vjs7.round(this._seconds(e/100),this.updatePrecision-1)},_percent:function(t){var e=this.player.duration();return isNaN(e)?0:Math.min(1,Math.max(0,t/e))},_seconds:function(t){var e=this.player.duration();return isNaN(e)?0:Math.min(e,Math.max(0,t*e))},_reset:function(){var t=this.player.duration();this.tpl.el_.style.left="0%",this.tpr.el_.style.left="100%",this._setValuesLocked(0,t)},_setValuesLocked:function(t,e,n){var i=void 0!==n;n=void 0===n||n,this.options.locked?(this.unlock(),this.setValue(0,t,n),this.setValue(1,e,n),this.lock()):(this.setValue(0,t,n),this.setValue(1,e,n)),i&&this._triggerSliderChange()},_checkControlTime:function(t,e,n){var i,o,a,s=e[0],e=e[1],r=s.value,l=e.value;if(t=t||0,r!=n[0])i=s,o=r,a=n[0];else{if(l==n[1])return!1;i=e,o=l,a=n[1]}var n=this.player.duration()||0;(!/^\d+$/.test(o)||60<o)&&(o=""===o?"":a),r=""===r?0:r,l=""===l?0:l,n<(n=60*parseInt(r)+parseInt(l))?(i.value=a,i.style.border="1px solid red"):(i.value=o,i.style.border=s.style.border=e.style.border="1px solid transparent",this.setValue(t,n,!1),this._triggerSliderChange()),1===t?n<60*(r=this.ctpl.el_.children)[0].value+r[1].value&&(i.style.border="1px solid red"):60*(l=this.ctpr.el_.children)[0].value+l[1].value<n&&(i.style.border="1px solid red")},_triggerSliderChange:function(){this.player.trigger("sliderchange")}};var t=videojs.getComponent("Player");t.prototype._v4=_vjs7,t.prototype.lockSlider=function(){return this.rangeslider.lock()},t.prototype.unlockSlider=function(){return this.rangeslider.unlock()},t.prototype.showSlider=function(){return this.rangeslider.show()},t.prototype.hideSlider=function(){return this.rangeslider.hide()},t.prototype.showSliderPanel=function(){return this.rangeslider.showPanel()},t.prototype.hideSliderPanel=function(){return this.rangeslider.hidePanel()},t.prototype.showControlTime=function(){return this.rangeslider.showcontrolTime()},t.prototype.hideControlTime=function(){return this.rangeslider.hidecontrolTime()},t.prototype.setValueSlider=function(t,e){return this.rangeslider.setValues(t,e)},t.prototype.playBetween=function(t,e){return this.rangeslider.playBetween(t,e)},t.prototype.loopBetween=function(t,e){return this.rangeslider.loop(t,e)},t.prototype.getValueSlider=function(){return this.rangeslider.getValues()},videojs.getComponent("SeekBar").prototype.options_.children.push("RSTimeBar");videojs.getComponent("ControlBar").prototype.options_.children.push("ControlTimePanel");var i=videojs.getComponent("Component"),t=videojs.extend(i,{constructor:function(t,e){i.call(this,t,e)}}),t=(t.prototype.init_=function(){this.rs=this.player_.rangeslider},t.prototype.options_={children:{SeekRSBar:{}}},t.prototype.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-timebar-RS",innerHTML:""})},videojs.registerComponent("RSTimeBar",t),videojs.extend(i,{constructor:function(t,e){i.call(this,t,e),this.on("mousedown",this.onMouseDown)}})),t=(t.prototype.init_=function(){this.rs=this.player_.rangeslider},t.prototype.options_={children:{SelectionBar:{},SelectionBarLeft:{},SelectionBarRight:{},TimePanel:{}}},t.prototype.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-rangeslider-holder"})},t.prototype.onMouseDown=function(t){t.preventDefault(),_vjs7.blockTextSelection(),this.rs.options.locked||(_vjs7.on(document,"mousemove",videojs.bind(this,this.onMouseMove)),_vjs7.on(document,"mouseup",videojs.bind(this,this.onMouseUp)))},t.prototype.onMouseUp=function(t){_vjs7.off(document,"mousemove",this.onMouseMove,!1),_vjs7.off(document,"mouseup",this.onMouseUp,!1)},t.prototype.onMouseMove=function(t){var t=this.calculateDistance(t),e=(this.rs.left.pressed?this.setPosition(0,t):this.rs.right.pressed&&this.setPosition(1,t),this.player_.controlBar.currentTimeDisplay);e.contentEl_.innerHTML='<span class="vjs-control-text">'+e.localize("Current Time")+"</span>"+_vjs7.formatTime(this.rs._seconds(t),this.player_.duration()),(this.rs.left.pressed||this.rs.right.pressed)&&this.rs._triggerSliderChange()},t.prototype.setPosition=function(t,e,n){if(n=void 0===n||n,t=t||0,this.rs.options.locked)return!1;if(isNaN(e))return!1;if(0!==t&&1!==t)return!1;var i,o,a=this.rs.left.el_,s=(this.rs.right.el_,this.rs[0===t?"left":"right"].el_),r=this.rs.tpr.el_,l=this.rs.tpl.el_,d=this.rs.bar,c=this.rs[0===t?"ctpl":"ctpr"].el_;return(0===t?d.updateLeft(e):d.updateRight(e))&&(s.style.left=100*e+"%",0===t?d.updateLeft(e):d.updateRight(e),this.rs[0===t?"start":"end"]=this.rs._seconds(e),0===t&&(a.style.zIndex=.9<=e?25:10),s=_vjs7.formatTime(this.rs._seconds(e)),a=(d=l.children[0].innerHTML.length)<=4?this.player_.isFullScreen?3.25:6.5:d<=5?this.player_.isFullScreen?4:8:this.player_.isFullScreen?5:10,d=s.length<=4?this.player_.isFullScreen?97:93:s.length<=5?this.player_.isFullScreen?96:95:this.player_.isFullScreen?95:91,o=this.player_.isFullScreen?.1:.5,0===t?(l.style.left=Math.max(o,Math.min(d,100*e-a/2))+"%",r.style.left.replace("%","")-l.style.left.replace("%","")<=a&&(l.style.left=Math.max(o,Math.min(d,r.style.left.replace("%","")-a))+"%"),l.children[0].innerHTML=s):(r.style.left=Math.max(o,Math.min(d,100*e-a/2))+"%",(r.style.left.replace("%","")||100)-l.style.left.replace("%","")<=a&&(r.style.left=Math.max(o,Math.min(d,+l.style.left.replace("%","")+a))+"%"),r.children[0].innerHTML=s),n&&(e=2==(t=s.split(":")).length?(i=t[0],t[1]):(t[0],i=t[1],t[2]),c.children[0].value=i,c.children[1].value=e)),!0},t.prototype.calculateDistance=function(t){var e=this.getRSTBX(),n=this.getRSTBWidth(),i=this.getWidth();return e+=i/2,n-=i,Math.max(0,Math.min(1,(t.pageX-e)/n))},t.prototype.getRSTBWidth=function(){return this.el_.offsetWidth},t.prototype.getRSTBX=function(){return _vjs7.findPosition(this.el_).left},t.prototype.getWidth=function(){return this.rs.left.el_.offsetWidth},videojs.registerComponent("SeekRSBar",t),videojs.extend(i,{constructor:function(t,e){i.call(this,t,e),this.on("mouseup",this.onMouseUp),this.fired=!1}})),t=(t.prototype.init_=function(){this.rs=this.player_.rangeslider},t.prototype.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-selectionbar-RS"})},t.prototype.onMouseUp=function(){var t=this.rs.left.el_.style.left.replace("%",""),e=this.rs.right.el_.style.left.replace("%",""),n=this.player_.duration(),i=this.rs.updatePrecision,t=_vjs7.round(t*n/100,i),e=_vjs7.round(e*n/100,i);this.player_.currentTime(t),this.player_.play(),this.rs.bar.activatePlay(t,e)},t.prototype.updateLeft=function(t){var e=""!==this.rs.right.el_.style.left?this.rs.right.el_.style.left:100,e=parseFloat(e)/100,n=_vjs7.round(e-t,this.rs.updatePrecision);return t<=1e-5+e&&(this.rs.bar.el_.style.left=100*t+"%",this.rs.bar.el_.style.width=100*n+"%",!0)},t.prototype.updateRight=function(t){var e=""!==this.rs.left.el_.style.left?this.rs.left.el_.style.left:0,e=parseFloat(e)/100,n=_vjs7.round(t-e,this.rs.updatePrecision);return e<=t+1e-5&&(this.rs.bar.el_.style.width=100*n+"%",this.rs.bar.el_.style.left=100*(t-n)+"%",!0)},t.prototype.activatePlay=function(t,e){this.timeStart=t,this.timeEnd=e,this.suspendPlay(),this.player_.on("timeupdate",videojs.bind(this,this._processPlay))},t.prototype.suspendPlay=function(){this.fired=!1,this.player_.off("timeupdate",videojs.bind(this,this._processPlay))},t.prototype._processPlay=function(){this.player_.currentTime()>=this.timeStart&&(this.timeEnd<0||this.player_.currentTime()<this.timeEnd)?this.fired||(this.fired=!0):this.fired&&(this.fired=!1,this.player_.pause(),this.player_.currentTime(this.timeEnd),this.suspendPlay())},t.prototype.process_loop=function(){var t,e=this.player;e&&this.looping&&(((t=e.currentTime())<this.timeStart||0<this.timeEnd&&this.timeEnd<t)&&e.currentTime(this.timeStart))},videojs.registerComponent("SelectionBar",t),videojs.extend(i,{constructor:function(t,e){i.call(this,t,e),this.on("mousedown",this.onMouseDown),this.pressed=!1}})),t=(t.prototype.init_=function(){this.rs=this.player_.rangeslider},t.prototype.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-rangeslider-handle vjs-selectionbar-left-RS",innerHTML:'<div class="vjs-selectionbar-arrow-RS"></div><div class="vjs-selectionbar-line-RS"></div>'})},t.prototype.onMouseDown=function(t){t.preventDefault(),_vjs7.blockTextSelection(),this.rs.options.locked||(this.pressed=!0,_vjs7.on(document,"mouseup",videojs.bind(this,this.onMouseUp)),_vjs7.addClass(this.el_,"active"))},t.prototype.onMouseUp=function(t){_vjs7.off(document,"mouseup",this.onMouseUp,!1),_vjs7.removeClass(this.el_,"active"),this.rs.options.locked||(this.pressed=!1)},videojs.registerComponent("SelectionBarLeft",t),videojs.extend(i,{constructor:function(t,e){i.call(this,t,e),this.on("mousedown",this.onMouseDown),this.pressed=!1}})),t=(t.prototype.init_=function(){this.rs=this.player_.rangeslider},t.prototype.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-rangeslider-handle vjs-selectionbar-right-RS",innerHTML:'<div class="vjs-selectionbar-arrow-RS"></div><div class="vjs-selectionbar-line-RS"></div>'})},t.prototype.onMouseDown=function(t){t.preventDefault(),_vjs7.blockTextSelection(),this.rs.options.locked||(this.pressed=!0,_vjs7.on(document,"mouseup",videojs.bind(this,this.onMouseUp)),_vjs7.addClass(this.el_,"active"))},t.prototype.onMouseUp=function(t){_vjs7.off(document,"mouseup",this.onMouseUp,!1),_vjs7.removeClass(this.el_,"active"),this.rs.options.locked||(this.pressed=!1)},videojs.registerComponent("SelectionBarRight",t),videojs.extend(i,{constructor:function(t,e){i.call(this,t,e)}})),t=(t.prototype.init_=function(){this.rs=this.player_.rangeslider},t.prototype.options_={children:{TimePanelLeft:{},TimePanelRight:{}}},t.prototype.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-timepanel-RS"})},videojs.registerComponent("TimePanel",t),videojs.extend(i,{constructor:function(t,e){i.call(this,t,e)}})),t=(t.prototype.init_=function(){this.rs=this.player_.rangeslider},t.prototype.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-timepanel-left-RS",innerHTML:'<span class="vjs-time-text">00:00</span>'})},videojs.registerComponent("TimePanelLeft",t),videojs.extend(i,{constructor:function(t,e){i.call(this,t,e)}})),t=(t.prototype.init_=function(){this.rs=this.player_.rangeslider},t.prototype.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-timepanel-right-RS",innerHTML:'<span class="vjs-time-text">00:00</span>'})},videojs.registerComponent("TimePanelRight",t),videojs.extend(i,{constructor:function(t,e){i.call(this,t,e)}})),t=(t.prototype.init_=function(){this.rs=this.player_.rangeslider},t.prototype.options_={children:{ControlTimePanelLeft:{},ControlTimePanelRight:{},ControlTimeSetButton:{}}},t.prototype.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-controltimepanel-RS vjs-control"})},t.prototype.enable=function(t){this.rs.ctpl.el_.children[0].disabled=(t=void 0===t||t)?"":"disabled",this.rs.ctpl.el_.children[1].disabled=t?"":"disabled",this.rs.ctpr.el_.children[0].disabled=t?"":"disabled",this.rs.ctpr.el_.children[1].disabled=t?"":"disabled"},videojs.registerComponent("ControlTimePanel",t),videojs.extend(i,{constructor:function(t,e){i.call(this,t,e),this.on("keyup",this.onKeyUp),this.on("keydown",this.onKeyDown)}})),e=(t.prototype.init_=function(){this.rs=this.player_.rangeslider,this.timeOld={}},t.prototype.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-controltimepanel-left-RS",innerHTML:'Start: <input type="number" id="from_minute" maxlength="2" min="0" max="59" value="0"/>:<input type="number" id="from_second" maxlength="2" min="0" max="59" value="0"/>'})},t.prototype.onKeyDown=function(t){this.timeOld[0]=this.el_.children[0].value,this.timeOld[1]=this.el_.children[1].value},t.prototype.onKeyUp=function(t){this.rs._checkControlTime(0,this.el_.children,this.timeOld)},videojs.extend(i,{constructor:function(t,e){i.call(this,t,e),this.on("keyup",this.onKeyUp),this.on("keydown",this.onKeyDown)}})),o=(e.prototype.init_=function(){this.rs=this.player_.rangeslider,this.timeOld={}},e.prototype.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-controltimepanel-right-RS",innerHTML:'End: <input type="number" id="to_minute" maxlength="2" min="0" max="59" value="0"/>:<input type="number" id="to_second" maxlength="2" min="0" max="59" value="0"/>'})},e.prototype.onKeyDown=function(t){this.timeOld[0]=this.el_.children[0].value,this.timeOld[1]=this.el_.children[1].value},e.prototype.onKeyUp=function(t){this.rs._checkControlTime(1,this.el_.children,this.timeOld)},videojs.extend(i,{constructor:function(t,e){i.call(this,t,e),this.on("click",this.set)}}));o.prototype.init_=function(){this.rs=this.player_.rangeslider,this.timeOld={}},o.prototype.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-controltime-set-button",innerHTML:'<button type="button" class="btn btn-success btn-sm">SET</button>'})},o.prototype.set=function(t){event_emitter.trigger("videojs.go_to_sec",this.player())},videojs.registerComponent("ControlTimePanelLeft",t),videojs.registerComponent("ControlTimePanelRight",e),videojs.registerComponent("ControlTimeSetButton",o)}(),$(function(){event_emitter.on("article.delete.article",function(t,e,n,i){$.ajax({method:"post",url:n,data:i,complete:function(t){void 0!==t.responseJSON&&t.responseJSON.success&&(event_emitter.trigger("article.delete.article.done",e),event_emitter.trigger("form.ajax.result.alert",[t]))}})})}),$(function(){$("#article-edit-article").on("submit",function(t){t.preventDefault();var e=$(this),t=e.attr("action"),n=global_functions.form_to_json(e);$.ajax({method:"post",url:t,data:n,complete:function(t){event_emitter.trigger("article.edit.article.done",[t,n]),event_emitter.trigger("form.ajax.result.alert",[t,e])}})})}),$(function(){var t=$("#article-edit-article"),a=t.find('input[name="keywords"]'),s=$("#article-keywords-selector"),e=s.attr("data-action"),n=s.attr("data-initial-action"),i=t.find('input[name="csrf_name"]').val(),o=t.find('input[name="csrf_value"]').val();s.select2({width:"100%",tokenSeparators:[","],multiple:!0,closeOnSelect:!0,minimumInputLength:2,ajax:{placeholder:"Select Keywords",url:e,type:"POST",dataType:"json",data:function(t,e){return{string:t.term,csrf_name:i,csrf_value:o}},processResults:function(t){return{results:t.result}}},templateSelection:function(t){return t.text}}),s.on("change",function(){a.attr("value",s.val().join(","))}),event_emitter.on("movie.edit.open",function(t,e){$.ajax({url:n,type:"POST",data:{article_id:e,csrf_name:i,csrf_value:o},complete:function(t){if(void 0!==t.responseJSON&&t.responseJSON.success){var e,n,t=t.responseJSON,i=[],o=t.result;for(e in new Option("",0,!0,!0),s.html("").trigger("change"),o)i.push(o[e].id),n=new Option(o[e].text,o[e].id,!0,!0),s.append(n).trigger("change");a.attr("value",i.join(","))}}})})}),$(function(){var n=$(document),t=$("#authenticate"),i=t.find('button[type="button"]'),o=!1;t.on("submit",function(t){var e;t.preventDefault(),o||(o=!0,e=$(this),global_functions.button_is_loading(i),$.ajax({method:"post",url:e.attr("action"),data:global_functions.form_to_json(e),complete:function(t){n.trigger("form.ajax.result.alert",[t,e]),400<=t.status&&(global_functions.button_is_not_loading(i),o=!1)}}))}),i.on("click",function(){t.trigger("submit")})}),$(function(){var t=$("input[name='start_date']"),e=$("input[name='end_date']"),n=$("input[name='date']");t.flatpickr({enableTime:!0,enableSeconds:!0,time_24hr:!0,minuteIncrement:1,dateFormat:"Y-m-d H:i:S",defaultDate:t.length&&t.val().length?t.val():moment().format("YYYY-MM-DD 00:00:00"),onClose:function(t,e,n){1===t.length&&((t=t[0]).setHours($(n.calendarContainer).find(".flatpickr-hour").val()),t.setMinutes($(n.calendarContainer).find(".flatpickr-minute").val()),t.setSeconds($(n.calendarContainer).find(".flatpickr-second").val()),n.setDate(t,!0))}}),e.flatpickr({enableTime:!0,enableSeconds:!0,time_24hr:!0,minuteIncrement:1,dateFormat:"Y-m-d H:i:S",defaultDate:e.length&&e.val().length?e.val():moment().format("YYYY-MM-DD 00:00:00"),onClose:function(t,e,n){1===t.length&&((t=t[0]).setHours($(n.calendarContainer).find(".flatpickr-hour").val()),t.setMinutes($(n.calendarContainer).find(".flatpickr-minute").val()),t.setSeconds($(n.calendarContainer).find(".flatpickr-second").val()),n.setDate(t,!0))}}),n.flatpickr({minuteIncrement:1,dateFormat:"Y-m-d",defaultDate:n.length&&n.val().length?n.val():moment().format("YYYY-MM-DD"),onClose:function(t,e,n){1===t.length&&(t=t[0],n.setDate(t,!0))}})}),$(function(){var n=!1,e=$("#listing-get-list");if(0===e.length)return!1;function i(t){for(var e in g)_[g[e].name]=parseInt(e);var n=t.DataTable({dom:"Brfltip",columns:g,columnDefs:[{targets:[_.keywords],visible:!1,searchable:!0},{targets:[_.text],visible:!1,searchable:!1},{targets:[_.status],visible:!1,searchable:!0}],order:[[_.id,"desc"]],select:{style:"multi"},buttons:[{text:"Select All",action:function(){n.rows({page:"current"}).select()}},"selectNone"],language:{buttons:{selectNone:"Deselect All"}}});return n}function o(t){b.off("page.dt"),b.destroy(),d.html(""),$.each(t,function(t,e){var n,o,i;global_functions.launch_template(global_functions.build_template((i=f.clone(),n=i.prop("attributes"),o=$(document.createElement("tr")),i=i.find("ul"),$.each(i,function(t,e){e=$(e);var n=$(document.createElement("td")),i=e.prop("attributes");n.html(e.html()),$.each(i,function(){n.attr(this.name,this.value)}),o.append(n)}),$.each(n,function(){if("name"===this.name)return!0;o.attr(this.name,this.value)}),o),e),d)}),(b=i(v)).on("page.dt",function(){b.rows({selected:!0}).deselect()}),s()}function s(){c.unbind("show.bs.modal").on("show.bs.modal",function(t){var t=$(t.relatedTarget),e=t.closest("tr"),r=e.find('td[name="id"]').html().trim();b.rows().every(function(t,e,n){var i=this.data();if(i[_.id]===r){var o=i,a=!0,s=o[_.status];if(s==="live"&&a)m.attr("disabled","disabled");return $.each(h.find("input"),function(t,e){e=$(e);if(e.attr("type")==="submit")return true;if(s==="live"&&a)e.attr("disabled","disabled");var n=e.attr("name");if(n==="csrf_name")e.attr("value",d.find('input[name="csrf_name"]').val());else if(n==="csrf_value")e.attr("value",d.find('input[name="csrf_value"]').val());else{e.val(o[_[n]]);e.attr("value",o[_[n]])}}),!1}}),c.modal({show:!0}),p.find("source").attr("src",t.attr("data-src")),p[0].load(),p[0].pause(),event_emitter.trigger("movie.edit.open",e.find('td[name="id"]').html().trim())}),d.unbind("click").on("click",'button[name="download-btn"]',function(t){window.location.href=$(this).attr("data-download")}),u.unbind("show.bs.modal").on("show.bs.modal",function(t){var o=$(t.relatedTarget);u.unbind("click").on("click",'button[name="delete-btn"]',function(t){var e=o.attr("data-action-url"),n=o.closest("tr").find('td[name="id"]').html().trim(),i={id:n,csrf_name:d.find('input[name="csrf_name"]').val(),csrf_value:d.find('input[name="csrf_value"]').val()};n&&event_emitter.trigger("article.delete.article",[o,e,i])})})}var a=e.find('button[type="button"]'),t=$("#listing-status-approve"),r=$("#listing-status-pending"),l=$("#listing-status-live"),d=$("#listing-list-holder"),c=$("#listing-modal-edit-article"),u=$("#listing-modal-delete-article"),p=$("#listing-modal-movie-play"),h=$("#article-edit-article"),m=h.find("#listing-modal-edit-article-button-submit"),f=$("#global-templates-holder").find('li[name="global_template_list_video"]'),v=$("#listing-video-table"),_={},g=[{name:"status"},{name:"keywords"},{name:"status_badge"},{name:"headline"},{name:"id"},{name:"issue_datetime"},{name:"created"},{name:"publication"},{name:"duration"},{name:"file_size"},{name:"actions"},{name:"text"}],b=i(v);m.on("click",function(t){t.preventDefault(),global_functions.button_is_loading(m),h.submit()}),event_emitter.on("article.delete.article.done",function(t,e){var i=(e=$(e)).closest("tr").find('td[name="id"]').html().trim();b.rows().every(function(t,e,n){if(this.data()[_.id]===i)return b.row(this).remove().draw(!0),!1}),u.modal("hide")}),event_emitter.on("article.edit.article.done",function(t,e,o){var a;global_functions.button_is_not_loading(m),c.length&&void 0!==e.responseJSON&&e.responseJSON.success&&(a=o.id,b.rows().every(function(t,e,n){var i=this.data();if(i[_.id]===a)return $.each(h.find("input"),function(t,e){if("submit"===(e=$(e)).attr("type"))return!0;var e=e.attr("name"),n=o[e];i[_[e]]=n,"status"===e&&(i[_.status_badge]=global_functions.build_status_badge(n).prop("outerHTML"))}),this.data(i),!1}),c.modal("hide"),s())}),event_emitter.on("article.edit.article_status.done",function(t,e,i,n){var o;global_functions.button_is_not_loading(n),void 0!==e.responseJSON&&e.responseJSON.success&&(n=b.rows(),o=!1,n.every(function(t,e,n){return-1===i.rowIdxs.indexOf(t)||((o=this.data())[_.status]=i.status,o[_.status_badge]=global_functions.build_status_badge(i.status).prop("outerHTML"),this.data(o)),!1}))}),c.on("hidden.bs.modal",function(t){p[0].pause(),$.each(h.find("input"),function(t,e){if("submit"===(e=$(e)).attr("type"))return!0;e.val(""),e.attr("value",""),e.removeAttr("disabled")}),m.removeAttr("disabled")}),a.on("click",function(t){t.preventDefault(),e.trigger("submit")}),e.on("submit",function(t){var e;t.preventDefault(),n||(n=!0,e=$(this),t=global_functions.form_to_json(e),global_functions.button_is_loading(a),$.ajax({method:"post",url:e.attr("action"),data:t,complete:function(t){event_emitter.trigger("form.ajax.result.alert",[t,e]),global_functions.button_is_not_loading(a),n=!1,void 0!==t.responseJSON&&void 0!==t.responseJSON.result&&void 0!==t.responseJSON.result.videos&&o(t.responseJSON.result.videos)}}))}),t.add(r).add(l).on("click",function(t){t.preventDefault();var e,n,i,o,t=b.rows(".selected");t.count()&&(i=(n=(e=$(this)).data()).url,o={ids:[],rowIdxs:[],status:n.value,csrf_name:d.find('input[name="csrf_name"]').val(),csrf_value:d.find('input[name="csrf_value"]').val()},t.every(function(t,e,n){var i=this.data();return o.ids.push(i[_.id]),o.rowIdxs.push(t),i[_.status_badge]=$(i[_.status_badge]).html('<img height="24" src="/images/preloader_circle.gif">').prop("outerHTML"),this.data(i),!1}),$.ajax({method:"post",url:i,data:o,complete:function(t){event_emitter.trigger("article.edit.article_status.done",[t,o,e]),event_emitter.trigger("form.ajax.result.alert",[t])}}))})}),$(function(){var t=$("#listing-country-select");if(0===t.length)return!1;var e=$("#listing-country-input");t.select2(),t.on("change",function(){e.attr("value",t.val().join(","))})}),$(function(){var t=$("#listing-publication-select");if(0===t.length)return!1;var e=$("#listing-publication-input");t.select2(),t.on("change",function(){e.attr("value",t.val().join(","))})}),$(function(){var t=$("#listing-status-select");if(0===t.length)return!1;var e=$("#listing-status-input");t.select2(),t.on("change",function(){e.attr("value",t.val().join(","))})}),$(function(){var i=$("#publications-report-table"),t=i.DataTable({select:!1}),o=$("#publication-modal-restart-process");o.on("show.bs.modal",function(t){var e=$(t.relatedTarget),n=e.data();o.unbind("click").on("click",'button[name="restart-btn"]',function(t){o.modal("hide"),global_functions.button_is_loading(e),$.ajax({method:"post",url:n.actionUrl,data:{id:n.id,process:n.process,server:n.server,csrf_name:i.find('input[name="csrf_name"]').val(),csrf_value:i.find('input[name="csrf_value"]').val()},complete:function(t){event_emitter.trigger("form.ajax.result.alert",[t]),global_functions.button_is_not_loading(e)}})})}),t.order([4,"asc"],[5,"asc"]).draw()}),$(function(){var a=$("#video-episodes-holder");if(0===a.length)return!1;var s=0,r=0,l=videojs.getPlayer("video-preview"),e=$("#video-get-episode"),d=e.find('button[type="button"]'),c=!1;d.on("click",function(t){t.preventDefault(),e.submit()}),e.on("submit",function(t){var e,n,i,o;t.preventDefault(),c||(c=!0,t=Math.floor(l.rangeslider.start),e=Math.ceil(l.rangeslider.end),void 0!==(n=l.currentSource())&&void 0!==n.src&&(o=e,0<=(i=t)&&0<o&&i<o)?(o=(i=$(this)).attr("action"),global_functions.button_is_loading(d),$.ajax({method:"post",url:o,data:{from:t,to:e,playlist:n.src,csrf_name:i.find('input[name="csrf_name"]').val(),csrf_value:i.find('input[name="csrf_value"]').val()},complete:function(t){var e,n,i;event_emitter.trigger("form.ajax.result.alert",[t]),global_functions.button_is_not_loading(d),c=!1,void 0!==t.responseJSON.result&&void 0!==t.responseJSON.result.src&&(e=t.responseJSON.result.src,t=t.responseJSON.result.poster,n="video-episode-"+r,a.append('<div class="col-md-'+Math.floor(4)+'"><div class="row mx-auto"><video id="'+n+'" class="col-sm-12 video-js vjs-big-play-centered vjs-default-skin mr-2 mt-2" controls poster="/images/no_video.png" preload="auto" data-setup=\'{"inactivityTimeout":0,"width":426,"height":225,"playbackRates":[0.5,1,1.25,1.5,2]}\'></video></div><div class="row mx-auto"><button id="remove-'+n+'" class="col-sm-12 btn btn-danger btn-md oi oi-trash" style="top: 0px;"></button></div></div>'),$("#remove-"+n).unbind().on("click",function(t){$("#"+n).parent().parent().remove(),0===--s&&$("#video-episodes-to-movie").hide(),i.dispose(),global_functions.refresh_playlist_holder_height()}),i=videojs(n,{width:426,height:225,controls:!0,plugins:{}}),global_functions.set_playlist_to_player(i,e),global_functions.set_poster_to_player(i,t),i.currentTime(.1),i.rangeslider({hidden:!0,responsive:!0,width:426,height:225}),r++,++s&&$("#video-episodes-to-movie").show(),global_functions.refresh_playlist_holder_height())}})):(event_emitter.trigger("show_global_errors",[["Please load a playlist first and then set the time range correctly."]]),c=!1))})}),$(function(){var r=!1,e=$("#video-get-movie");if(0===e.length)return!1;function l(t){global_functions.build_template(o,t).prependTo(a),n()}function n(){a.find('button[name="play-btn"]').unbind().on("click",function(t){var o=$(this).closest("li"),a=o.find('[name="status"]').html();u.find("source").attr("src",$(this).attr("data-src")),u[0].load(),u[0].pause(),"live"===a&&h.attr("disabled","disabled"),$.each(p.find("input"),function(t,e){var n=(e=$(e)).attr("type");if("live"===a&&e.attr("disabled","disabled"),"submit"===n)return!0;var n=e.attr("name"),n=o.find('[name="'+n+'"]'),i=n.html();void 0!==(i=void 0!==i&&0!==i.length?i:n.val())&&(i=i.trim(),e.val(i),e.attr("value",i))}),s.modal({show:!0}),event_emitter.trigger("movie.edit.open",o.find('div[name="id"]').html().trim())}),a.find('button[name="download-btn"]').unbind().on("click",function(t){window.location.href=$(this).attr("data-download")}),i.unbind().on("show.bs.modal",function(t){var o=$(t.relatedTarget);i.unbind("click").on("click",'button[name="delete-btn"]',function(t){var e=o.attr("data-action-url"),n=o.closest("li").find('div[name="id"]').html().trim(),i={id:n,csrf_name:a.find('input[name="csrf_name"]').val(),csrf_value:a.find('input[name="csrf_value"]').val()};n&&event_emitter.trigger("article.delete.article",[o,e,i])})})}var d=$("#video-new-movie"),i=$("#video-modal-delete-article"),c=e.find("#video-get-movie-submit-button"),a=$("#video-movies-holder"),o=$("#global-templates-holder").find('li[name="global_template_list_movie"]'),s=$("#video-modal-edit-article"),u=$("#video-modal-movie-play"),p=$("#article-edit-article"),h=p.find("#video-modal-edit-article-button-submit");event_emitter.on("movie.get.list",function(t,e){$.ajax({method:"post",url:a.attr("data-movie-list-url"),data:e,complete:function(t){if(void 0!==t.responseJSON&&t.responseJSON.success&&void 0!==t.responseJSON.result&&Array.isArray(t.responseJSON.result.movies))for(var e in a.html(""),t.responseJSON.result.movies)l(t.responseJSON.result.movies[e])}})}),c.on("click",function(t){t.preventDefault(),e.submit()}),h.on("click",function(t){t.preventDefault(),global_functions.button_is_loading(h),p.submit()}),event_emitter.on("article.delete.article.done",function(t,e){$(e).closest("li").remove(),i.modal("hide")}),event_emitter.on("article.edit.article.done",function(t,e){var n,o;global_functions.button_is_not_loading(h),s.length&&void 0!==e.responseJSON&&e.responseJSON.success&&(n=p.find('input[name="id"]').val(),e=a.find('div[name="id"]'),o=!1,$.each(e,function(t,e){if((e=$(e)).html().trim()===n)return o=e.closest("li"),!1}),o&&$.each(p.find("input"),function(t,e){if("submit"===(e=$(e)).attr("type"))return!0;var n=e.attr("name"),e=e.val(),i=o.find('[name="'+n+'"]');void 0!==i.attr("value")?i.val(e):i.html(e),"status"===n&&o.find('[name="status_badge"]').html(global_functions.build_status_badge(e).prop("outerHTML"))}),s.modal("hide"))}),s.on("hidden.bs.modal",function(t){u[0].pause(),$.each(p.find("input"),function(t,e){if("submit"===(e=$(e)).attr("type"))return!0;e.val(""),e.attr("value",""),e.removeAttr("disabled")}),h.removeAttr("disabled")}),e.on("submit",function(t){if(t.preventDefault(),!r){r=!0;for(var e,n,i=videojs.getAllPlayers(),o=[],a=0;a<i.length;a++){var s=i[a];-1<s.id_.search("video-episode")&&o.push(s.currentSource().src)}o.length&&(t=(e=$(this)).attr("action"),(n=global_functions.form_to_json(e)).episodes=o,global_functions.button_is_loading(c),$.ajax({method:"post",url:t,data:n,complete:function(t){event_emitter.trigger("form.ajax.result.alert",[t,e]),global_functions.button_is_not_loading(c),r=!1,void 0!==t.responseJSON&&t.responseJSON.success&&(l(t.responseJSON.result),d.modal("hide"),global_functions.clear_episodes(),e.find('input[name="title"]').val(""))}}))}}),n()}),$(function(){var s=$("#video-get-playlist");if(0===s.length)return!1;if(0===s.length)return!1;$("#segment_text");var i=$("#video-playlists-holder"),n=$("#global-templates-holder").find('div[name="global_template_alert_playlist"]'),o=s.find('button[type="button"]'),a=(s.find('input[name="csrf_name"]').val(),s.find('input[name="csrf_value"]').val(),!1);function r(){let t=l.transcriptVideoEditing(),e=document.querySelector("#transcript");e.innerHTML="",e.appendChild(t.el()),"Arabic"==$("#publication_lang").val()?t.setLineClass("rtl"):t.setLineClass("ltr"),$(".transcript-line",e).css("float","right")}let l=videojs("video-preview");l.ready(function(){$(".vjs-text-track-display").css("display","none"),r()});function d(){var n=i.find(".list-group-item");n.unbind().on("click",function(){var t=$(this),e=t.data();global_functions.reset_player(),global_functions.unselect_playlists(n),t.addClass("list-group-item-warning"),t.removeClass("list-group-item-success"),global_functions.set_playlist_to_videojs(e.url),global_functions.set_poster_to_videojs(e.poster),c(e.publication,e.hash,e.urlVtt)})}let c=function(t,n,e){$(".vjs-text-track-display").css("display","none");var i=s.find('select[name="batch"]').val(),o=(e=(e=(e=e.replace(/publication/,t)).replace(/interval/,i)).replace(/hash/,n),l.textTracks());let a=!1;for(let e=0;e<o.length;e++){let t=o[e];"captions"===t.kind&&t.id===n?(a=!0,t.mode="showing"):t.mode="disabled"}a||(t={kind:"captions",id:n,srclang:"en",label:"English",src:e,mode:"showing"},l.addRemoteTextTrack(t,!1)),r()};o.on("click",function(t){t.preventDefault(),s.trigger("submit")}),s.on("submit",function(t){var e;t.preventDefault(),$("#video-movies-holder").html(""),global_functions.clear_episodes(),i.html(""),global_functions.reset_player(),a||(t=$("option:selected",$("#publication")).attr("lang"),$("#publication_lang").val(t),a=!0,e=$(this),t=global_functions.form_to_json(e),global_functions.button_is_loading(o),event_emitter.trigger("movie.get.list",t),$.ajax({method:"post",url:e.attr("action"),data:t,complete:function(t){event_emitter.trigger("form.ajax.result.alert",[t,e]),global_functions.button_is_not_loading(o),a=!1,void 0!==t.responseJSON&&void 0!==t.responseJSON.result&&void 0!==t.responseJSON.result.playlists&&(t=t.responseJSON.result.playlists,$.each(t,function(t,e){global_functions.launch_template(global_functions.build_template(n,e),i)}),d(),global_functions.refresh_playlist_holder_height())}}))}),d()}),$(function(){let o=$("#video-search-text");if(0===o.length)return!1;let t=o.find('input[name="text"]'),a=o.find('input[name="csrf_name"]').val(),s=o.find('input[name="csrf_value"]').val(),e=$("#global-templates-holder"),r=e.find('div[name="global_template_alert_search_text"]');$("#global-alerts-holder"),e.find('div[name="global_template_alert_info"]');let n=$("#publication-select"),i=$("#country_select");function l(){$.ajax({url:r.attr("data-get-publication-list"),type:"post",data:global_functions.form_to_json(o)}).done(function(t){n.val(null).trigger("change"),n.empty(),$.each(t.result.texts,function(t,e){e=new Option(e.name_en,e.id,!1,!1);n.append(e).trigger("change")});t=r.attr("data-publications").split(",");n.val(t).change()}).fail(function(t,e,n){event_emitter.trigger("form.ajax.result.alert",[t,o])})}function d(){r.attr("data-text",t.val()),$.ajax({url:o.attr("action"),type:"post",data:global_functions.form_to_json(o)}).done(function(t){event_emitter.trigger("form.ajax.result.alert",[t,o]),u.clear().draw(),u.rows.add(t.result.data).draw()}).fail(function(t,e,n){u.clear().draw(),event_emitter.trigger("form.ajax.result.alert",[t,o])})}n.select2(),i.select2(),i.on("change",function(){l()}),l(),c=r.attr("data-countries").split(","),i.val(c).change(),t.val()&&d();var c={data:[],columns:[{data:"pub_id"},{data:"pub_name"},{data:"publication_language"},{data:"country_name"},{data:"date"},{data:"start_date"},{data:"end_date"},{data:"publication",orderable:!1,render:function(t,e,n){if("display"!==e)return t;{let t=r.attr("data-get-segment-url");return t=(t=(t=t.replace("start_segment",encodeURIComponent(n.start_segment_formatted))).replace("end_segment",encodeURIComponent(n.end_segment_formatted))).replace("publication",encodeURIComponent(n.pub_id)),'<div class="btn-toolbar" role="group"> <div class="btn-group mr-2 mx-auto" role="group"><button name="desc-btn" type="button" class="btn btn-primary oi oi-info desc-btn" data-toggle="modal" data-target="#listing-modal-edit-article" data-pub-id="'+n.pub_id+'" data-start-date="'+n.start_date+'" data-end-date="'+n.end_date+'" title=""></button><a href="'+t+'" class="segment-btn" data-redirect-url="'+t+'" data-pub-id="'+n.pub_id+'" title="Go to segment"> <button name="segment-btn" type="button" class="btn btn-secondary oi oi-arrow-right" data-toggle="modal"></button></a></div></div>'}}}],rowCallback:function(t,e){}};let u=$("#listing-publication-table").DataTable(c);$("#reset_button").on("click",function(){r.attr("data-publications",""),r.attr("data-countries",""),n.val(null).trigger("change"),i.val(null).trigger("change"),t.val(""),u.rows().clear().draw(),u.clear().draw()}),$("#search_button").on("click",function(){d()}),$(document).on("click",".desc-btn",function(){let t=$(this),e=t.closest("tr"),n=u.row(e);var i;n.child.isShown()?(n.child.hide(),e.removeClass("shown")):(i={csrf_name:a,csrf_value:s,publication:$(this).attr("data-pub-id"),start_date:$(this).attr("data-start-date"),end_date:$(this).attr("data-end-date")},$.ajax({url:r.attr("data-get-text-url"),type:"post",data:i}).done(function(t){t=t.result.texts.join(" ");n.child($('<div class="text-preview" style="width: 100%; background-color: #bee5eb; padding: 10px; white-space: normal;">'+t+"</div>").highlight(r.attr("data-text").split(" "))).show(),e.addClass("shown")}).fail(function(t,e,n){event_emitter.trigger("form.ajax.result.alert",[t,o])}))}),$(document).on("click",".segment-btn",function(t){t.preventDefault();let e=$(this),n=e.attr("data-redirect-url"),i=global_functions.form_to_json(o);i.publication=$(this).attr("data-pub-id"),$.ajax({url:r.attr("data-save-search-filter-url"),type:"post",data:i}).done(function(t){window.location.replace(n)}).fail(function(t,e,n){event_emitter.trigger("form.ajax.result.alert",[t,o])})}),o.on("submit",function(t){return t.preventDefault(),d(),!1})}),$(function(){var t=videojs.getPlayer("video-preview"),e=$("#video-clear-player"),n=25,i=setInterval(function(){void 0!==t?(t.ready(function(){t.rangeslider({hidden:!1,responsive:!0,width:800,height:400,controlTime:!0,controlBar:{volumePanel:{inline:!1,vertical:!0}}})}),clearInterval(i)):0===n&&clearInterval(i),n--},200);e.on("click",function(t){t.preventDefault(),global_functions.reset_player(),global_functions.unselect_playlists()})});